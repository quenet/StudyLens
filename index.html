
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Study Lens AI - AI ê¸°ë°˜ êµê³¼ì„œ ìë™ ì¸ì‹ ë° í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ">
    <meta name="keywords" content="StudyLens, AI, êµê³¼ì„œ ì¸ì‹, í•™ìŠµ ê´€ë¦¬, ìˆ˜ëŠ¥, ëŒ€í•™ ì…ì‹œ">
    <meta name="author" content="StudyLens Team">
    
    <title>StudyLens AI - ìŠ¤ë§ˆíŠ¸ êµê³¼ì„œ ì¸ì‹ í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4c51bf">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="StudyLens AI">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Tesseract.js OCR Library -->
    <script src='https://unpkg.com/tesseract.js@4.0.2/dist/tesseract.min.js'></script>
    
    <!-- Chart.js for Efficiency Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="StudyLens AI - ìŠ¤ë§ˆíŠ¸ êµê³¼ì„œ ì¸ì‹">
    <meta property="og:description" content="AI ê¸°ë°˜ êµê³¼ì„œ ìë™ ì¸ì‹ ë° í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ">
    <meta property="og:type" content="website">
    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
            font-size: 16px;
        }
        
        /* Container & Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }
        
        /* Header Styles - ìƒë‹¨ ê³ ì •, ëª¨ë°”ì¼ ìµœì í™” */
        header {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }
        
        h1 {
            color: #333;
            font-size: 26px;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .subtitle {
            color: #666;
            font-size: 13px;
            margin-bottom: 10px;
            text-align: center;
            line-height: 1.3;
        }
        
        /* Navigation Menu - ë°ìŠ¤í¬í†± row, ëª¨ë°”ì¼ rowë¡œ í•œ ì¤„ ë°°ì¹˜ */
        .nav-menu {
            display: flex;
            flex-direction: row;
            gap: 0;
            border-top: 1px solid #eee;
            padding-top: 10px;
            justify-content: space-around;
        }
        
        .nav-link {
            background: #4c51bf;
            color: white;
            text-decoration: none;
            padding: 12px 8px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
            text-align: center;
            flex: 1;
            max-width: 25%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .nav-link:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
        }
        
        /* Section Styles */
        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease;
        }
        
        .section-title {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4c51bf;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 18px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }
        
        select, input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #4c51bf;
            box-shadow: 0 0 0 3px rgba(76, 81, 191, 0.1);
        }
        
        /* Buttons */
        button {
            background: #4c51bf;
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(76, 81, 191, 0.3);
            margin: 4px;
            min-height: 44px;
        }
        
        button:hover:not(:disabled) {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 81, 191, 0.4);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: #6b7280;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .btn-success {
            background: #10b981;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-warning {
            background: #f59e0b;
        }
        
        .btn-warning:hover {
            background: #d97706;
        }
        
        .btn-danger {
            background: #ef4444;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        /* Camera Container */
        .camera-container {
            position: relative;
            max-width: 100%;
            margin: 0 auto 20px;
        }
        
        #webcam, #canvas {
            width: 100%;
            max-width: 640px;
            height: auto;
            border-radius: 15px;
            border: 3px solid #4c51bf;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        /* Subject Indicator */
        .subject-indicator {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(76, 81, 191, 0.95);
            color: white;
            padding: 12px 32px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 5px 25px rgba(0,0,0,0.3);
            z-index: 10;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }
        
        /* Subject Timer Grid */
        .subject-timer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 10px;
            margin-top: 20px;
            padding: 18px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .subject-time-card {
            background: white;
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #4c51bf;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }
        
        .subject-time-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        }
        
        .subject-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        .subject-time {
            font-size: 18px;
            color: #4c51bf;
            font-weight: bold;
        }
        
        /* Recognition Status */
        .recognition-status {
            text-align: center;
            margin: 18px 0;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 15px;
        }
        
        .status-detecting {
            background: #fff7e6;
            color: #d48806;
            border: 2px solid #ffc53d;
        }
        
        .status-recognized {
            background: #f6ffed;
            color: #52c41a;
            border: 2px solid #52c41a;
        }
        
        .status-none {
            background: #f0f0f0;
            color: #666;
            border: 2px solid #d9d9d9;
        }
        
        .status-error {
            background: #fff1f0;
            color: #ff4d4f;
            border: 2px solid #ff4d4f;
        }
        
        /* Detection Info */
        .detection-info {
            display: flex;
            justify-content: space-around;
            margin-top: 18px;
            padding: 12px;
            background: #e6f7ff;
            border-radius: 12px;
            flex-wrap: wrap;
        }
        
        .detection-item {
            text-align: center;
            flex: 1;
            min-width: 70px;
            margin: 5px;
        }
        
        .detection-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .detection-value {
            font-size: 18px;
            font-weight: bold;
            color: #1890ff;
        }
        
        /* Manual Subject Selection */
        .manual-select {
            margin-top: 18px;
            padding: 12px;
            background: #f0f0f0;
            border-radius: 12px;
        }
        
        .manual-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 6px;
            margin-top: 10px;
        }
        
        .subject-btn {
            padding: 10px;
            border: 2px solid #4c51bf;
            background: white;
            color: #4c51bf;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 13px;
            min-height: 40px;
        }
        
        .subject-btn:hover {
            background: #4c51bf;
            color: white;
            transform: scale(1.05);
        }
        
        .subject-btn.active {
            background: #4c51bf;
            color: white;
        }
        
        /* Timer Display */
        .timer {
            font-size: 42px;
            font-weight: bold;
            color: #4c51bf;
            text-align: center;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Statistics Section */
        .stats-section {
            margin-top: 20px;
            padding: 18px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
        }
        
        .stats-section h3 {
            margin-bottom: 12px;
            color: #333;
            font-size: 17px;
        }
        
        .stats-section p {
            margin: 6px 0;
            font-size: 14px;
        }
        
        .stats-section strong {
            color: #4c51bf;
            font-size: 15px;
        }
        
        /* Grade Input Grid */
        .grade-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 10px;
        }
        
        /* Result Box */
        .result-box {
            background: #f7f7f7;
            border-radius: 10px;
            padding: 18px;
            margin-top: 20px;
        }
        
        /* Study Plan Item */
        .study-plan {
            background: white;
            border-left: 4px solid #4c51bf;
            padding: 12px;
            margin: 8px 0;
            border-radius: 5px;
        }
        
        /* University Recommendation Card */
        .university-recommendation {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 10px;
            padding: 12px;
            margin: 8px 0;
        }
        
        /* Dashboard Stats Grid */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 18px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        /* Control Buttons Container */
        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin: 18px 0;
        }
        
        /* Learning Session Controls */
        .learning-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .learning-status {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .session-log {
            margin-top: 15px;
            padding: 10px;
            background: #f8fafc;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 5px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        /* Responsive Design - ëª¨ë°”ì¼ ê°€ë…ì„± ê°•í™”, ë©”ë‰´ í•œ ì¤„ ë°°ì¹˜ */
        @media (max-width: 768px) {
            body {
                font-size: 15px;
            }
            
            .container {
                padding: 5px;
            }
            
            h1 {
                font-size: 22px;
            }
            
            .subtitle {
                font-size: 12px;
            }
            
            /* ëª¨ë°”ì¼ ë©”ë‰´: í•œ ì¤„ë¡œ ë°°ì¹˜, í…ìŠ¤íŠ¸ ì¶•ì†Œ */
            .nav-menu {
                gap: 2px;
                padding-top: 8px;
            }
            
            .nav-link {
                padding: 10px 4px;
                font-size: 11px;
                max-width: none;
            }
            
            .section {
                padding: 18px;
                margin-bottom: 12px;
            }
            
            .section-title {
                font-size: 18px;
            }
            
            .timer {
                font-size: 32px;
            }
            
            .subject-timer {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 12px;
            }
            
            .subject-time {
                font-size: 16px;
            }
            
            .detection-info {
                flex-direction: column;
                gap: 8px;
                padding: 10px;
            }
            
            .detection-value {
                font-size: 16px;
            }
            
            .manual-buttons {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .subject-btn {
                font-size: 12px;
                padding: 8px;
            }
            
            .control-buttons {
                flex-direction: column;
                width: 100%;
            }
            
            .control-buttons button {
                width: 100%;
            }
            
            .learning-controls {
                flex-direction: column;
            }
            
            .grade-inputs {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            .stats-section p {
                font-size: 13px;
            }
        }
        
        @media (max-width: 480px) {
            .subject-timer {
                grid-template-columns: 1fr;
            }
            
            .manual-buttons {
                grid-template-columns: 1fr;
            }
            
            .detection-info {
                justify-content: center;
            }
            
            .detection-item {
                min-width: auto;
                margin: 3px;
            }
            
            /* ì‘ì€ í™”ë©´ ë©”ë‰´ í…ìŠ¤íŠ¸ ë” ì¶•ì†Œ */
            .nav-link {
                font-size: 10px;
                padding: 8px 2px;
            }
        }
        
        /* Efficiency Analysis Styles - ì¶”ê°€ */
        .efficiency-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin: 10px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .efficiency-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .efficiency-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .efficiency-label {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .score-input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .score-card {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 10px;
            border-left: 4px solid #4c51bf;
        }
        
        .score-card h4 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .score-card input, .score-card select {
            margin-top: 8px;
        }
        
        .analysis-result {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .recommendation {
            background: #fff4e6;
            border: 1px solid #ffd591;
            padding: 12px;
            border-radius: 10px;
            margin: 8px 0;
        }
        
        .feature-preview {
            opacity: 0.7;
            border: 2px dashed #999;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            background: #f9f9f9;
            text-align: center;
        }
        
        .efficiency-chart-container {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            height: 200px;
            position: relative;
        }
        
        .efficiency-chart-container canvas {
            max-height: 180px !important;
        }
        
        .pattern-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .pattern-card {
            background: #f0f4f8;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .pattern-card h4 {
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .pattern-card p {
            margin: 5px 0;
        }
        
        .pattern-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .efficiency-score {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin: 15px 0;
        }
        
        .warning-card {
            background: #fff5f5;
            border-left: 4px solid #ef4444;
            padding: 12px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .warning-card h4 {
            margin-bottom: 5px;
            color: #dc2626;
        }
        
        .success-card {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 12px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .success-card h4 {
            margin-bottom: 5px;
            color: #059669;
        }
        
        @media (max-width: 768px) {
            .efficiency-score {
                font-size: 28px;
            }
            
            .efficiency-value {
                font-size: 18px;
            }
            
            .pattern-analysis {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section - ëª¨ë°”ì¼ ìµœì í™” -->
        <header>
            <h1>ğŸ“š StudyLens AI  (QueNet Demo Ver 0.2)</h1>
            <p class="subtitle">AI ê¸°ë°˜ í•™ìŠµ ê´€ë¦¬ í”Œë«í¼ ì„œë¹„ìŠ¤</p>
            
            <!-- Navigation Menu - í…ìŠ¤íŠ¸ ì¶•ì†Œ -->
            <nav class="nav-menu">
                <a href="#section-tracker" class="nav-link">ğŸ“¸ ê³µë¶€ì‹œì‘</a>
                <a href="#section-goal" class="nav-link">ğŸ¯ ëª©í‘œ</a>
                <a href="#section-current" class="nav-link">ğŸ“Š ì„±ì </a>
                <a href="#section-efficiency" class="nav-link">âš¡ íš¨ìœ¨ë¶„ì„</a>
                <a href="#section-dashboard" class="nav-link">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ</a>
            </nav>
        </header>

        <!-- Section 1: êµê³¼ì„œ ì¸ì‹ -->
        <section id="section-tracker" class="section">
            <h2 class="section-title">
                <span>ğŸ“¸</span>
                <span>êµê³¼ì„œ ìˆ˜ë™ ì¸ì‹ & í•™ìŠµ ì‹œê°„ ì¶”ì </span>
            </h2>
            
            <div class="camera-container">
                <video id="webcam" autoplay playsinline></video>
                <canvas id="canvas"></canvas>
                
                <div id="subjectIndicator" class="subject-indicator hidden">
                    <span id="currentSubject">ê°ì§€ì¤‘...</span>
                </div>
            </div>
            
            <div id="recognitionStatus" class="recognition-status status-none">
                ğŸ“· ì¹´ë©”ë¼ë¥¼ ì‹œì‘í•˜ê³  êµê³¼ì„œë¥¼ ë³´ì—¬ì£¼ì„¸ìš”
            </div>
            
            <div class="control-buttons">
                <button onclick="startCamera()" id="startBtn" class="btn-success">
                    ğŸ¥ ì¹´ë©”ë¼ ì‹œì‘
                </button>
                <button onclick="stopCamera()" id="stopBtn" class="hidden btn-secondary">
                    â¹ï¸ ì¹´ë©”ë¼ ì¢…ë£Œ
                </button>
                <button onclick="captureTextbook()" id="captureBtn" class="hidden">
                    ğŸ“¸ êµê³¼ì„œ ì¸ì‹í•˜ê¸°
                </button>
            </div>
            
            <div class="manual-select">
                <p><strong>ìˆ˜ë™ ê³¼ëª© ì„ íƒ</strong></p>
                <div class="manual-buttons">
                    <button class="subject-btn" onclick="selectSubject('êµ­ì–´')">êµ­ì–´</button>
                    <button class="subject-btn" onclick="selectSubject('ìˆ˜í•™')">ìˆ˜í•™</button>
                    <button class="subject-btn" onclick="selectSubject('ì˜ì–´')">ì˜ì–´</button>
                    <button class="subject-btn" onclick="selectSubject('ë¬¼ë¦¬')">ë¬¼ë¦¬</button>
                    <button class="subject-btn" onclick="selectSubject('í™”í•™')">í™”í•™</button>
                    <button class="subject-btn" onclick="selectSubject('ìƒë¬¼')">ìƒë¬¼</button>
                    <button class="subject-btn" onclick="selectSubject('í•œêµ­ì‚¬')">í•œêµ­ì‚¬</button>
                    <button class="subject-btn" onclick="selectSubject('ì‚¬íšŒ')">ì‚¬íšŒ</button>
                </div>
            </div>
            
            <!-- í•™ìŠµ ì„¸ì…˜ ì œì–´ -->
            <div class="learning-controls">
                <button onclick="startLearningSession()" id="startLearningBtn" class="btn-success hidden">
                    â–¶ï¸ í•™ìŠµ ì‹œì‘
                </button>
                <button onclick="stopLearningSession()" id="stopLearningBtn" class="btn-danger hidden">
                    â¹ï¸ í•™ìŠµ ì¤‘ì§€
                </button>
            </div>
            
            <div id="learningStatus" class="learning-status hidden">
                ğŸ“š í˜„ì¬ í•™ìŠµ ì¤‘: <span id="sessionSubject">-</span> | ì´ ì‹œê°„: <span id="sessionTime">00:00</span>
            </div>
            
            <div class="detection-info">
                <div class="detection-item">
                    <div class="detection-label">ì¸ì‹ ì •í™•ë„</div>
                    <div class="detection-value" id="accuracy">0%</div>
                </div>
                <div class="detection-item">
                    <div class="detection-label">ê°ì§€ëœ í…ìŠ¤íŠ¸</div>
                    <div class="detection-value" id="detectedText">-</div>
                </div>
                <div class="detection-item">
                    <div class="detection-label">ìƒ‰ìƒ ë¶„ì„</div>
                    <div class="detection-value" id="colorAnalysis">-</div>
                </div>
            </div>
            
            <div class="timer" id="totalTimer">00:00:00</div>
            
            <div class="subject-timer">
                <div class="subject-time-card">
                    <div class="subject-name">ğŸ“– êµ­ì–´</div>
                    <div class="subject-time" id="time-êµ­ì–´">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸ”¢ ìˆ˜í•™</div>
                    <div class="subject-time" id="time-ìˆ˜í•™">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸŒ ì˜ì–´</div>
                    <div class="subject-time" id="time-ì˜ì–´">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">âš›ï¸ ë¬¼ë¦¬</div>
                    <div class="subject-time" id="time-ë¬¼ë¦¬">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸ§ª í™”í•™</div>
                    <div class="subject-time" id="time-í™”í•™">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸ¦  ìƒë¬¼</div>
                    <div class="subject-time" id="time-ìƒë¬¼">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸ›ï¸ í•œêµ­ì‚¬</div>
                    <div class="subject-time" id="time-í•œêµ­ì‚¬">0ë¶„</div>
                </div>
                <div class="subject-time-card">
                    <div class="subject-name">ğŸŒ ì‚¬íšŒ</div>
                    <div class="subject-time" id="time-ì‚¬íšŒ">0ë¶„</div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3>ğŸ“Š ì˜¤ëŠ˜ì˜ í•™ìŠµ ë¶„ì„</h3>
                <p>ğŸ“š ê°€ì¥ ë§ì´ ê³µë¶€í•œ ê³¼ëª©: <strong id="topSubject">-</strong></p>
                <p>â±ï¸ ì´ í•™ìŠµ ì‹œê°„: <strong id="totalStudyTime">0ì‹œê°„ 0ë¶„</strong></p>
                <p>ğŸ¯ ì§‘ì¤‘ë„: <strong id="concentration">0%</strong></p>
                <p>ğŸ“ˆ ëª©í‘œ ë‹¬ì„±ë¥ : <strong id="achievement">0%</strong></p>
            </div>
            
            <!-- ì„¸ì…˜ ë¡œê·¸ -->
            <div class="session-log">
                <h4>ğŸ“ í•™ìŠµ ì„¸ì…˜ ë¡œê·¸</h4>
                <div id="logEntries"></div>
            </div>
        </section>

        <!-- Section 2: ëª©í‘œ ëŒ€í•™ ì„¤ì • -->
        <section id="section-goal" class="section">
            <h2 class="section-title">
                <span>ğŸ¯</span>
                <span>ëª©í‘œ ëŒ€í•™ ê¸°ë°˜ í•™ìŠµ ê³„íš</span>
            </h2>
            
            <div class="form-group">
                <label>ëª©í‘œ ëŒ€í•™ ì„ íƒ</label>
                <select id="targetUniversity" onchange="updateDepartments()">
                    <option value="">ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì„œìš¸ëŒ€">ì„œìš¸ëŒ€í•™êµ</option>
                    <option value="ì—°ì„¸ëŒ€">ì—°ì„¸ëŒ€í•™êµ</option>
                    <option value="ê³ ë ¤ëŒ€">ê³ ë ¤ëŒ€í•™êµ</option>
                    <option value="ì„±ê· ê´€ëŒ€">ì„±ê· ê´€ëŒ€í•™êµ</option>
                    <option value="í•œì–‘ëŒ€">í•œì–‘ëŒ€í•™êµ</option>
                    <option value="ì„œê°•ëŒ€">ì„œê°•ëŒ€í•™êµ</option>
                    <option value="ì¤‘ì•™ëŒ€">ì¤‘ì•™ëŒ€í•™êµ</option>
                    <option value="ê²½í¬ëŒ€">ê²½í¬ëŒ€í•™êµ</option>
                    <option value="í•œêµ­ì™¸ëŒ€">í•œêµ­ì™¸êµ­ì–´ëŒ€í•™êµ</option>
                    <option value="ì„œìš¸ì‹œë¦½ëŒ€">ì„œìš¸ì‹œë¦½ëŒ€í•™êµ</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ëª©í‘œ í•™ê³¼ ì„ íƒ</label>
                <select id="targetDepartment">
                    <option value="">ë¨¼ì € ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ìˆ˜ëŠ¥ê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜</label>
                <input type="number" id="daysRemaining" value="300" min="1" max="365">
            </div>
            
            <button onclick="generatePlanFromGoal()">ğŸ¤– AI í•™ìŠµ ê³„íš ìƒì„±</button>
            
            <div id="goalResult" class="result-box hidden"></div>
        </section>

        <!-- Section 3: ì„±ì  ë¶„ì„ -->
        <section id="section-current" class="section">
            <h2 class="section-title">
                <span>ğŸ“Š</span>
                <span>í˜„ì¬ ì„±ì  ê¸°ë°˜ ëŒ€í•™ ì¶”ì²œ</span>
            </h2>
            
            <div class="form-group">
                <label>í˜„ì¬ ë“±ê¸‰ ì…ë ¥ (1-9ë“±ê¸‰)</label>
                <div class="grade-inputs">
                    <div>
                        <label style="font-weight: normal; font-size: 13px;">êµ­ì–´</label>
                        <input type="number" id="grade-korean" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 13px;">ìˆ˜í•™</label>
                        <input type="number" id="grade-math" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 13px;">ì˜ì–´</label>
                        <input type="number" id="grade-english" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 13px;">íƒêµ¬1</label>
                        <input type="number" id="grade-science1" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 13px;">íƒêµ¬2</label>
                        <input type="number" id="grade-science2" min="1" max="9" value="3">
                    </div>
                </div>
            </div>
            
            <button onclick="recommendUniversities()">ğŸ“ ì§„í•™ ê°€ëŠ¥ ëŒ€í•™ ë¶„ì„</button>
            
            <div id="currentResult" class="result-box hidden"></div>
        </section>

        <!-- Section 4: í•™ìŠµ ëŒ€ì‹œë³´ë“œ -->
        <section id="section-dashboard" class="section">
            <h2 class="section-title">
                <span>ğŸ“ˆ</span>
                <span>í•™ìŠµ ëŒ€ì‹œë³´ë“œ</span>
            </h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-value">D-287</div>
                    <div class="stat-label">ìˆ˜ëŠ¥ê¹Œì§€</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="weeklyHours">0h</div>
                    <div class="stat-label">ì£¼ê°„ í•™ìŠµ ì‹œê°„</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="dashAchievement">0%</div>
                    <div class="stat-label">ëª©í‘œ ë‹¬ì„±ë¥ </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">15ìœ„</div>
                    <div class="stat-label">ì „ì²´ ë­í‚¹</div>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <h3>ğŸ“Š ì£¼ê°„ í•™ìŠµ ë¶„ì„</h3>
                <canvas id="weeklyChart" width="400" height="200" style="max-width: 100%;"></canvas>
            </div>
            
            <div style="margin-top: 20px;">
                <h3>ğŸ¯ ì´ë²ˆ ì£¼ ëª©í‘œ</h3>
                <div class="study-plan">
                    <strong>ìˆ˜í•™:</strong> ë¯¸ì ë¶„ 3ë‹¨ì› ì™„ë£Œ (ì§„ë„ìœ¨ 65%)
                </div>
                <div class="study-plan">
                    <strong>ì˜ì–´:</strong> ëª¨ì˜ê³ ì‚¬ 3íšŒ (2/3 ì™„ë£Œ)
                </div>
                <div class="study-plan">
                    <strong>êµ­ì–´:</strong> ë¹„ë¬¸í•™ ì§€ë¬¸ 20ê°œ (18/20 ì™„ë£Œ)
                </div>
                <div class="study-plan">
                    <strong>íƒêµ¬:</strong> ë¬¼ë¦¬ ì—­í•™ ë‹¨ì› ì •ë¦¬ (ì§„ë„ìœ¨ 80%)
                </div>
            </div>
        </section>
        
        <!-- Section 5: í•™ìŠµ íš¨ìœ¨ì„± ë¶„ì„ (ìƒˆë¡œ ì¶”ê°€) -->
        <section id="section-efficiency" class="section">
            <h2 class="section-title">
                <span>âš¡</span>
                <span>ê°œì¸ë³„ í•™ìŠµ íš¨ìœ¨ì„± ë¶„ì„</span>
            </h2>

            <!-- íš¨ìœ¨ì„± ì ìˆ˜ í‘œì‹œ -->
            <div class="efficiency-card">
                <h3 style="text-align: center; margin-bottom: 10px;">ë‚˜ì˜ í•™ìŠµ íš¨ìœ¨ì„± ì§€ìˆ˜</h3>
                <div class="efficiency-score" id="efficiencyScore">72ì </div>
                <p style="text-align: center; font-size: 14px; opacity: 0.9;">
                    ìƒìœ„ 28% (ì „ì²´ ì‚¬ìš©ì ëŒ€ë¹„)
                </p>
                
                <div class="efficiency-metric">
                    <span class="efficiency-label">ì‹œê°„ë‹¹ ì„±ì  í–¥ìƒë„</span>
                    <span class="efficiency-value">+0.3ë“±ê¸‰/ì›”</span>
                </div>
                <div class="efficiency-metric">
                    <span class="efficiency-label">ì§‘ì¤‘ë„ íš¨ìœ¨</span>
                    <span class="efficiency-value">78%</span>
                </div>
                <div class="efficiency-metric">
                    <span class="efficiency-label">í•™ìŠµ íŒ¨í„´ ì¼ê´€ì„±</span>
                    <span class="efficiency-value">65%</span>
                </div>
            </div>

            <!-- ì„±ì  ì…ë ¥ ì„¹ì…˜ -->
            <div class="form-group">
                <h3 style="margin: 20px 0 15px 0;">ğŸ“ ì„±ì  ë°ì´í„° ì…ë ¥</h3>
                
                <!-- ëª¨ì˜ê³ ì‚¬ ì„±ì  ì…ë ¥ -->
                <div class="score-card">
                    <h4>ìµœê·¼ ëª¨ì˜ê³ ì‚¬ ì„±ì </h4>
                    <div class="score-input-grid">
                        <div>
                            <label>êµ­ì–´ (ë“±ê¸‰)</label>
                            <input type="number" id="mock-korean" min="1" max="9" placeholder="1-9">
                        </div>
                        <div>
                            <label>ìˆ˜í•™ (ë“±ê¸‰)</label>
                            <input type="number" id="mock-math" min="1" max="9" placeholder="1-9">
                        </div>
                        <div>
                            <label>ì˜ì–´ (ë“±ê¸‰)</label>
                            <input type="number" id="mock-english" min="1" max="9" placeholder="1-9">
                        </div>
                        <div>
                            <label>ì‹œí—˜ì¼ì</label>
                            <input type="date" id="mock-date">
                        </div>
                    </div>
                    <button onclick="saveMockExam()" style="margin-top: 10px;">
                        ğŸ’¾ ëª¨ì˜ê³ ì‚¬ ì„±ì  ì €ì¥
                    </button>
                </div>

                <!-- ë‚´ì‹  ì„±ì  ì…ë ¥ -->
                <div class="score-card" style="margin-top: 20px;">
                    <h4>ë‚´ì‹  ì„±ì  (ì¤‘ê°„/ê¸°ë§ê³ ì‚¬)</h4>
                    <div class="score-input-grid">
                        <div>
                            <label>êµ­ì–´ (ì ìˆ˜)</label>
                            <input type="number" id="school-korean" min="0" max="100" placeholder="0-100">
                        </div>
                        <div>
                            <label>ìˆ˜í•™ (ì ìˆ˜)</label>
                            <input type="number" id="school-math" min="0" max="100" placeholder="0-100">
                        </div>
                        <div>
                            <label>ì˜ì–´ (ì ìˆ˜)</label>
                            <input type="number" id="school-english" min="0" max="100" placeholder="0-100">
                        </div>
                        <div>
                            <label>ì‹œí—˜ êµ¬ë¶„</label>
                            <select id="exam-type">
                                <option value="midterm">ì¤‘ê°„ê³ ì‚¬</option>
                                <option value="final">ê¸°ë§ê³ ì‚¬</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="saveSchoolExam()" style="margin-top: 10px;">
                        ğŸ’¾ ë‚´ì‹  ì„±ì  ì €ì¥
                    </button>
                </div>
            </div>

            <!-- AI ë¶„ì„ ê²°ê³¼ -->
            <div class="analysis-result">
                <h3>ğŸ¤– AI í•™ìŠµ íš¨ìœ¨ì„± ë¶„ì„ ê²°ê³¼</h3>
                
                <div class="pattern-analysis">
                    <div class="pattern-card">
                        <h4>ìµœì  í•™ìŠµ ì‹œê°„ëŒ€</h4>
                        <p style="font-size: 20px; color: #4c51bf; margin: 8px 0;">ì˜¤í›„ 7-10ì‹œ</p>
                        <p style="font-size: 12px;">ì§‘ì¤‘ë„ 92%</p>
                    </div>
                    
                    <div class="pattern-card">
                        <h4>íš¨ìœ¨ì  ê³¼ëª©</h4>
                        <p style="font-size: 20px; color: #10b981; margin: 8px 0;">ìˆ˜í•™</p>
                        <p style="font-size: 12px;">ì‹œê°„ ëŒ€ë¹„ í–¥ìƒ ìµœê³ </p>
                    </div>
                    
                    <div class="pattern-card">
                        <h4>ê°œì„  í•„ìš”</h4>
                        <p style="font-size: 20px; color: #ef4444; margin: 8px 0;">ì˜ì–´</p>
                        <p style="font-size: 12px;">íš¨ìœ¨ ê°œì„  í•„ìš”</p>
                    </div>
                    
                    <div class="pattern-card">
                        <h4>ê¶Œì¥ íœ´ì‹</h4>
                        <p style="font-size: 20px; color: #f59e0b; margin: 8px 0;">50ë¶„</p>
                        <p style="font-size: 12px;">ìµœì  ì§‘ì¤‘ ì‹œê°„</p>
                    </div>
                </div>

                <!-- ìƒì„¸ ë¶„ì„ -->
                <div class="recommendation" style="margin-top: 20px;">
                    <h4>ğŸ’¡ ë§ì¶¤í˜• í•™ìŠµ ê°œì„  ì œì•ˆ</h4>
                    <ul style="margin-top: 10px; line-height: 1.8;">
                        <li><strong>ìˆ˜í•™:</strong> í˜„ì¬ íš¨ìœ¨ ìš°ìˆ˜. ì‹¬í™” ë¬¸ì œ ë¹„ì¤‘ì„ 20% ëŠ˜ë ¤ë³´ì„¸ìš”.</li>
                        <li><strong>ì˜ì–´:</strong> ë‹¨ì–´ ì•”ê¸° ì‹œê°„ì„ ì¤„ì´ê³  ë…í•´ ì—°ìŠµì— ì§‘ì¤‘í•˜ì„¸ìš”.</li>
                        <li><strong>êµ­ì–´:</strong> ë¹„ë¬¸í•™ ì§€ë¬¸ ë…í•´ ì†ë„ê°€ ëŠë¦¼. íƒ€ì´ë¨¸ í™œìš© ê¶Œì¥.</li>
                        <li><strong>ì „ì²´:</strong> ì£¼ 3íšŒ ì´ìƒ ëª¨ì˜ê³ ì‚¬ ì‹¤ì „ ì—°ìŠµ í•„ìš”.</li>
                    </ul>
                </div>

                <!-- ê²½ê³  ë©”ì‹œì§€ -->
                <div class="warning-card">
                    <h4>âš ï¸ ì£¼ì˜ ì‚¬í•­</h4>
                    <p>ìµœê·¼ 2ì£¼ê°„ ìˆ˜í•™ í•™ìŠµ ì‹œê°„ì´ 40% ê°ì†Œí–ˆìŠµë‹ˆë‹¤. ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ ì¼ì¼ 2ì‹œê°„ ì´ìƒ í™•ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
                </div>

                <!-- ì„±ê³µ ë©”ì‹œì§€ -->
                <div class="success-card">
                    <h4>âœ… ì˜í•˜ê³  ìˆì–´ìš”!</h4>
                    <p>êµ­ì–´ ì„±ì ì´ ì§€ë‚œë‹¬ ëŒ€ë¹„ 0.5ë“±ê¸‰ ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ í•™ìŠµ íŒ¨í„´ì„ ìœ ì§€í•˜ì„¸ìš”!</p>
                </div>
            </div>

            <!-- íš¨ìœ¨ì„± ì°¨íŠ¸ -->
            <div class="efficiency-chart-container">
                <h3>ğŸ“Š í•™ìŠµ íš¨ìœ¨ì„± ì¶”ì´</h3>
                <canvas id="efficiencyChart"></canvas>
            </div>

            <!-- ê³ ê¸‰ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸° -->
            <div class="feature-preview">
                <h3>ğŸ”® Premium ê¸°ëŠ¥ (ì¶œì‹œ ì˜ˆì •)</h3>
                <ul style="list-style: none; padding: 0; margin-top: 15px;">
                    <li>âœ¨ AI ì‹¤ì‹œê°„ í•™ìŠµ ì½”ì¹­</li>
                    <li>âœ¨ ë‡ŒíŒŒ ê¸°ë°˜ ì§‘ì¤‘ë„ ì¸¡ì • (EEG ì—°ë™)</li>
                    <li>âœ¨ ë˜ë˜ ê·¸ë£¹ íš¨ìœ¨ì„± ë¹„êµ</li>
                    <li>âœ¨ ëŒ€í•™ë³„ ë§ì¶¤ ì „ëµ ìˆ˜ë¦½</li>
                    <li>âœ¨ ì›”ê°„ í•™ìŠµ íš¨ìœ¨ì„± ë¦¬í¬íŠ¸</li>
                </ul>
                <p style="margin-top: 15px; font-size: 14px; color: #666;">
                    2025ë…„ 2ë¶„ê¸° ì •ì‹ ì¶œì‹œ ì˜ˆì •
                </p>
            </div>
        </section>
    </div>

    <script>
        // Global Variables
        let stream = null;
        let currentSubject = null;
        let subjectTimers = {};
        let totalStartTime = null;
        let subjectStartTime = null;
        let totalTimerInterval = null;
        let sessionStartTime = null;
        let sessionTimerInterval = null;
        let isTracking = false;
        let isSessionActive = false;
        let sessionLog = [];
        
        // Subjects
        const subjects = ['êµ­ì–´', 'ìˆ˜í•™', 'ì˜ì–´', 'ë¬¼ë¦¬', 'í™”í•™', 'ìƒë¬¼', 'í•œêµ­ì‚¬', 'ì‚¬íšŒ'];
        subjects.forEach(subject => {
            subjectTimers[subject] = 0;
        });
        
        // Textbook Colors
        const textbookColors = {
            'êµ­ì–´': { r: 150, g: 100, b: 50 },
            'ìˆ˜í•™': { r: 50, g: 100, b: 200 },
            'ì˜ì–´': { r: 200, g: 150, b: 50 },
            'ë¬¼ë¦¬': { r: 100, g: 150, b: 100 },
            'í™”í•™': { r: 150, g: 50, b: 150 },
            'ìƒë¬¼': { r: 50, g: 150, b: 50 },
            'í•œêµ­ì‚¬': { r: 180, g: 130, b: 70 },
            'ì‚¬íšŒ': { r: 100, g: 100, b: 100 }
        };
        
        // Textbook Keywords
        const textbookKeywords = {
            'êµ­ì–´': ['êµ­ì–´', 'ë¬¸í•™', 'ì–¸ì–´', 'ë…ì„œ', 'í™”ë²•', 'ì‘ë¬¸'],
            'ìˆ˜í•™': ['ìˆ˜í•™', 'ë¯¸ì ë¶„', 'í™•ë¥ ', 'í†µê³„', 'ê¸°í•˜', 'ëŒ€ìˆ˜', 'í•¨ìˆ˜'],
            'ì˜ì–´': ['English', 'ì˜ì–´', 'Reading', 'Grammar', 'Listening'],
            'ë¬¼ë¦¬': ['ë¬¼ë¦¬', 'Physics', 'ì—­í•™', 'ì „ìê¸°', 'íŒŒë™'],
            'í™”í•™': ['í™”í•™', 'Chemistry', 'ì›ì†Œ', 'í™”í•©ë¬¼', 'ë°˜ì‘'],
            'ìƒë¬¼': ['ìƒë¬¼', 'Biology', 'ìƒëª…', 'ê³¼í•™', 'ì„¸í¬'],
            'í•œêµ­ì‚¬': ['í•œêµ­ì‚¬', 'ì—­ì‚¬', 'êµ­ì‚¬', 'ê·¼í˜„ëŒ€ì‚¬'],
            'ì‚¬íšŒ': ['ì‚¬íšŒ', 'ì •ì¹˜', 'ê²½ì œ', 'ì§€ë¦¬', 'ìœ¤ë¦¬', 'ë²•']
        };
        
        // Expanded University Database with more departments
        const universityDB = {
            "ì„œìš¸ëŒ€": {
                departments: {
                    "ê²½ì˜í•™ê³¼": { avgGrade: 1.2, competition: 15.3, minScore: 95 },
                    "ì»´í“¨í„°ê³µí•™ë¶€": { avgGrade: 1.3, competition: 12.8, minScore: 94 },
                    "ì˜ì˜ˆê³¼": { avgGrade: 1.0, competition: 25.4, minScore: 98 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 1.5, competition: 8.7, minScore: 92 },
                    "ë²•í•™ëŒ€í•™": { avgGrade: 1.1, competition: 18.2, minScore: 96 },
                    "ê²½ì œí•™ê³¼": { avgGrade: 1.4, competition: 14.5, minScore: 93 },
                    "ì˜í•™ë¶€": { avgGrade: 1.0, competition: 28.6, minScore: 97 },
                    "ìì—°ê³¼í•™ëŒ€í•™": { avgGrade: 1.6, competition: 9.3, minScore: 91 }
                }
            },
            "ì—°ì„¸ëŒ€": {
                departments: {
                    "ê²½ì˜í•™ê³¼": { avgGrade: 1.4, competition: 18.2, minScore: 93 },
                    "ì „ê¸°ì „ìê³µí•™ë¶€": { avgGrade: 1.6, competition: 10.3, minScore: 91 },
                    "ì˜ì˜ˆê³¼": { avgGrade: 1.1, competition: 28.6, minScore: 97 },
                    "ë¬¸ê³¼ëŒ€í•™": { avgGrade: 1.8, competition: 7.5, minScore: 89 },
                    "êµ­ì œí•™ë¶€": { avgGrade: 1.5, competition: 16.1, minScore: 92 },
                    "ì‹¬ë¦¬í•™ê³¼": { avgGrade: 1.7, competition: 11.2, minScore: 90 },
                    "ì¹˜ì˜í•™ëŒ€í•™": { avgGrade: 1.2, competition: 22.4, minScore: 95 },
                    "ì¸ë¬¸ëŒ€í•™": { avgGrade: 1.9, competition: 8.9, minScore: 88 }
                }
            },
            "ê³ ë ¤ëŒ€": {
                departments: {
                    "ê²½ì˜ëŒ€í•™": { avgGrade: 1.5, competition: 16.8, minScore: 92 },
                    "ì»´í“¨í„°í•™ê³¼": { avgGrade: 1.7, competition: 14.2, minScore: 90 },
                    "ì˜ê³¼ëŒ€í•™": { avgGrade: 1.1, competition: 27.3, minScore: 97 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 1.8, competition: 9.5, minScore: 88 },
                    "ë²•í•™ëŒ€í•™": { avgGrade: 1.3, competition: 19.7, minScore: 94 },
                    "êµ­ì œí•™ë¶€": { avgGrade: 1.6, competition: 12.4, minScore: 91 },
                    "ì•½í•™ëŒ€í•™": { avgGrade: 1.4, competition: 20.1, minScore: 93 },
                    "ì‚¬íšŒê³¼í•™ëŒ€í•™": { avgGrade: 1.9, competition: 10.2, minScore: 87 }
                }
            },
            "ì„±ê· ê´€ëŒ€": {
                departments: {
                    "ê¸€ë¡œë²Œê²½ì˜": { avgGrade: 1.8, competition: 12.5, minScore: 88 },
                    "ë°˜ë„ì²´ì‹œìŠ¤í…œ": { avgGrade: 1.9, competition: 11.2, minScore: 87 },
                    "ì†Œí”„íŠ¸ì›¨ì–´": { avgGrade: 2.0, competition: 10.8, minScore: 86 },
                    "ìì—°ê³¼í•™": { avgGrade: 2.2, competition: 8.3, minScore: 84 },
                    "ì¸ë¬¸ì‚¬íšŒê³¼í•™": { avgGrade: 2.1, competition: 9.6, minScore: 85 },
                    "ì˜í•™ë¶€": { avgGrade: 1.3, competition: 24.5, minScore: 94 },
                    "ë²•í•™ì „ë¬¸ëŒ€í•™ì›": { avgGrade: 1.5, competition: 15.8, minScore: 92 },
                    "í–‰ì •í•™ê³¼": { avgGrade: 2.0, competition: 11.4, minScore: 86 }
                }
            },
            "í•œì–‘ëŒ€": {
                departments: {
                    "íŒŒì´ë‚¸ìŠ¤ê²½ì˜": { avgGrade: 1.9, competition: 13.2, minScore: 87 },
                    "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´": { avgGrade: 2.0, competition: 11.5, minScore: 86 },
                    "ê¸°ê³„ê³µí•™": { avgGrade: 2.1, competition: 9.8, minScore: 85 },
                    "ê±´ì¶•í•™ë¶€": { avgGrade: 2.2, competition: 8.7, minScore: 84 },
                    "ì „ìê³µí•™": { avgGrade: 2.0, competition: 10.3, minScore: 86 },
                    "ì˜í•™ë¶€": { avgGrade: 1.4, competition: 21.6, minScore: 93 },
                    "ë²•í•™ê³¼": { avgGrade: 1.8, competition: 14.2, minScore: 89 },
                    "êµ­ì œí•™ë¶€": { avgGrade: 2.1, competition: 12.1, minScore: 85 }
                }
            },
            "ì„œê°•ëŒ€": {
                departments: {
                    "ê²½ì˜í•™": { avgGrade: 1.7, competition: 14.5, minScore: 90 },
                    "ì»´í“¨í„°ê³µí•™": { avgGrade: 1.8, competition: 12.3, minScore: 89 },
                    "ì „ìê³µí•™": { avgGrade: 1.9, competition: 10.2, minScore: 88 },
                    "ì¸ë¬¸í•™ë¶€": { avgGrade: 2.0, competition: 8.5, minScore: 86 },
                    "ê²½ì œí•™ê³¼": { avgGrade: 1.6, competition: 13.8, minScore: 91 },
                    "ì‚¬íšŒê³¼í•™": { avgGrade: 1.9, competition: 11.7, minScore: 87 },
                    "ê¸°ì´ˆê³¼í•™": { avgGrade: 2.1, competition: 9.4, minScore: 85 },
                    "êµ­ì œë¬¸í™”": { avgGrade: 2.0, competition: 10.9, minScore: 86 }
                }
            },
            "ì¤‘ì•™ëŒ€": {
                departments: {
                    "ê²½ì˜ê²½ì œ": { avgGrade: 2.3, competition: 10.5, minScore: 83 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 2.5, competition: 8.2, minScore: 81 },
                    "ì˜í•™ë¶€": { avgGrade: 1.3, competition: 22.3, minScore: 94 },
                    "ì˜ˆìˆ ëŒ€í•™": { avgGrade: 2.8, competition: 15.2, minScore: 78 },
                    "ë²•í•™ëŒ€í•™": { avgGrade: 2.0, competition: 12.6, minScore: 85 },
                    "ì‚¬ë²”ëŒ€í•™": { avgGrade: 2.4, competition: 9.1, minScore: 82 },
                    "í–‰ì •ê²½ì œ": { avgGrade: 2.2, competition: 11.3, minScore: 84 },
                    "ì•½í•™ëŒ€í•™": { avgGrade: 1.8, competition: 18.7, minScore: 89 }
                }
            },
            "ê²½í¬ëŒ€": {
                departments: {
                    "í•œì˜ì˜ˆê³¼": { avgGrade: 1.5, competition: 20.5, minScore: 92 },
                    "í˜¸í…”ê²½ì˜": { avgGrade: 2.4, competition: 12.3, minScore: 82 },
                    "êµ­ì œí•™ë¶€": { avgGrade: 2.3, competition: 11.2, minScore: 83 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 2.6, competition: 7.8, minScore: 80 },
                    "ì˜í•™ë¶€": { avgGrade: 1.4, competition: 23.1, minScore: 93 },
                    "ë²•í•™": { avgGrade: 2.1, competition: 13.4, minScore: 84 },
                    "ê°„í˜¸ëŒ€í•™": { avgGrade: 2.0, competition: 16.2, minScore: 86 },
                    "í›„ë§ˆë‹ˆíƒ€ìŠ¤": { avgGrade: 2.5, competition: 10.5, minScore: 81 }
                }
            },
            "í•œêµ­ì™¸ëŒ€": {
                departments: {
                    "í†µë²ˆì—­ëŒ€í•™": { avgGrade: 2.2, competition: 18.5, minScore: 84 },
                    "êµ­ì œì§€ì—­ëŒ€í•™": { avgGrade: 2.5, competition: 10.2, minScore: 81 },
                    "ê²½ì˜í•™ë¶€": { avgGrade: 2.6, competition: 8.7, minScore: 80 },
                    "ì–´ë¬¸í•™ë¶€": { avgGrade: 2.7, competition: 7.5, minScore: 79 },
                    "ì˜ì–´í†µì—­ë²ˆì—­": { avgGrade: 2.1, competition: 19.8, minScore: 85 },
                    "ì¤‘êµ­ì–´": { avgGrade: 2.4, competition: 11.6, minScore: 82 },
                    "ì¼ë³¸ì–´": { avgGrade: 2.3, competition: 12.9, minScore: 83 },
                    "êµ­ì œí†µìƒ": { avgGrade: 2.5, competition: 9.4, minScore: 81 }
                }
            },
            "ì„œìš¸ì‹œë¦½ëŒ€": {
                departments: {
                    "ë„ì‹œê³µí•™": { avgGrade: 2.2, competition: 12.8, minScore: 84 },
                    "ì„¸ë¬´í•™ê³¼": { avgGrade: 2.3, competition: 14.2, minScore: 83 },
                    "ë„ì‹œí–‰ì •": { avgGrade: 2.4, competition: 10.5, minScore: 82 },
                    "ììœ ì „ê³µ": { avgGrade: 2.5, competition: 8.3, minScore: 81 },
                    "ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤": { avgGrade: 2.1, competition: 13.7, minScore: 85 },
                    "í™˜ê²½ê³µí•™": { avgGrade: 2.3, competition: 11.1, minScore: 83 },
                    "êµ­ì œê´€ê³„": { avgGrade: 2.4, competition: 12.4, minScore: 82 },
                    "ë¯¸ë””ì–´": { avgGrade: 2.6, competition: 9.8, minScore: 80 }
                }
            }
        };
        
        // Camera Functions
        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        width: { ideal: 640 },
                        height: { ideal: 480 },
                        facingMode: 'environment'
                    } 
                });
                
                const video = document.getElementById('webcam');
                video.srcObject = stream;
                
                document.getElementById('startBtn').classList.add('hidden');
                document.getElementById('stopBtn').classList.remove('hidden');
                document.getElementById('captureBtn').classList.remove('hidden');
                
                startTotalTimer();
                updateStatus('ğŸ“· ì¹´ë©”ë¼ ì¤€ë¹„ ì™„ë£Œ. ì¸ì‹ ë˜ëŠ” ìˆ˜ë™ ì„ íƒí•˜ì„¸ìš”.', 'none');
                
            } catch (err) {
                console.error('Camera error:', err);
                alert('ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
            }
        }
        
        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            
            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('stopBtn').classList.add('hidden');
            document.getElementById('captureBtn').classList.add('hidden');
            
            stopTotalTimer();
            stopLearningSession();
            updateStatus('ğŸ“· ì¹´ë©”ë¼ ì¢…ë£Œ', 'none');
        }
        
        async function captureTextbook() {
            const video = document.getElementById('webcam');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            if (!video.videoWidth) {
                updateStatus('âŒ ì¹´ë©”ë¼ ì¤€ë¹„ ì•ˆ ë¨', 'error');
                return;
            }
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.drawImage(video, 0, 0);
            
            const colorResult = analyzeColor(ctx);
            
            updateStatus('ğŸ” ì¸ì‹ ì¤‘...', 'detecting');
            
            try {
                const result = await Tesseract.recognize(
                    canvas.toDataURL(),
                    'kor+eng',
                    {
                        logger: m => {
                            if (m.status === 'recognizing text') {
                                document.getElementById('accuracy').textContent = Math.round(m.progress * 100) + '%';
                            }
                        }
                    }
                );
                
                const text = result.data.text.toLowerCase();
                const confidence = result.data.confidence;
                
                const detectedSubject = detectSubject(text, colorResult);
                
                if (detectedSubject) {
                    setCurrentSubject(detectedSubject);
                    document.getElementById('detectedText').textContent = text.substring(0, 20) + (text.length > 20 ? '...' : '');
                    document.getElementById('accuracy').textContent = Math.round(confidence) + '%';
                    updateStatus(`âœ… ${detectedSubject} ì¸ì‹ë¨!`, 'recognized');
                    showStartLearningButton();
                } else {
                    updateStatus('âŒ ì¸ì‹ ì‹¤íŒ¨. ìˆ˜ë™ ì„ íƒí•˜ì„¸ìš”.', 'error');
                }
                
            } catch (err) {
                console.error('OCR error:', err);
                updateStatus('âš ï¸ í…ìŠ¤íŠ¸ ì‹¤íŒ¨. ìƒ‰ìƒ ë¶„ì„...', 'detecting');
                if (colorResult.subject) {
                    setCurrentSubject(colorResult.subject);
                    updateStatus(`âœ… ${colorResult.subject} ìƒ‰ìƒ ì¸ì‹!`, 'recognized');
                    showStartLearningButton();
                } else {
                    updateStatus('âŒ ì¸ì‹ ì‹¤íŒ¨. ìˆ˜ë™ ì„ íƒ.', 'error');
                }
            }
        }
        
        function showStartLearningButton() {
            if (currentSubject) {
                document.getElementById('startLearningBtn').classList.remove('hidden');
            }
        }
        
        // í•™ìŠµ ì„¸ì…˜ ê´€ë¦¬
        function startLearningSession() {
            if (!currentSubject) {
                alert('ë¨¼ì € ê³¼ëª©ì„ ì„ íƒí•˜ì„¸ìš”.');
                return;
            }
            
            isSessionActive = true;
            sessionStartTime = Date.now();
            
            document.getElementById('startLearningBtn').classList.add('hidden');
            document.getElementById('stopLearningBtn').classList.remove('hidden');
            document.getElementById('learningStatus').classList.remove('hidden');
            document.getElementById('sessionSubject').textContent = currentSubject;
            
            sessionTimerInterval = setInterval(updateSessionTime, 1000);
            
            const logEntry = `í•™ìŠµ ì‹œì‘: ${currentSubject} (${new Date().toLocaleTimeString()})`;
            addToLog(logEntry);
            
            updateStatus(`â–¶ï¸ ${currentSubject} í•™ìŠµ ì‹œì‘!`, 'recognized');
        }
        
        function stopLearningSession() {
            if (sessionTimerInterval) {
                clearInterval(sessionTimerInterval);
                sessionTimerInterval = null;
            }
            
            if (currentSubject && sessionStartTime) {
                const elapsed = Date.now() - sessionStartTime;
                subjectTimers[currentSubject] += elapsed;
                updateSubjectTime(currentSubject);
            }
            
            isSessionActive = false;
            document.getElementById('stopLearningBtn').classList.add('hidden');
            document.getElementById('startLearningBtn').classList.remove('hidden');
            document.getElementById('learningStatus').classList.add('hidden');
            
            const sessionTime = formatTime(Date.now() - sessionStartTime);
            const logEntry = `í•™ìŠµ ì¤‘ì§€: ${currentSubject} (${sessionTime}, ${new Date().toLocaleTimeString()})`;
            addToLog(logEntry);
            
            updateStatus('â¹ï¸ í•™ìŠµ ì¤‘ì§€. ì‹œê°„ì´ ëˆ„ì ë˜ì—ˆìŠµë‹ˆë‹¤.', 'none');
        }
        
        function updateSessionTime() {
            if (sessionStartTime) {
                const elapsed = Date.now() - sessionStartTime;
                document.getElementById('sessionTime').textContent = formatTime(elapsed);
            }
        }
        
        function addToLog(entry) {
            sessionLog.push(entry);
            const logDiv = document.getElementById('logEntries');
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = entry;
            logDiv.appendChild(logEntry);
            
            // ë¡œê·¸ 10ê°œ ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ë¡œê·¸ ì‚­ì œ
            if (sessionLog.length > 10) {
                logDiv.removeChild(logDiv.firstChild);
                sessionLog.shift();
            }
        }
        
        function formatTime(ms) {
            const seconds = Math.floor((ms % 60000) / 1000);
            const minutes = Math.floor((ms % 3600000) / 60000);
            const hours = Math.floor(ms / 3600000);
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        
        function analyzeColor(ctx) {
            const imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
            const data = imageData.data;
            
            let r = 0, g = 0, b = 0;
            let pixels = 0;
            
            const centerX = Math.floor(ctx.canvas.width / 2);
            const centerY = Math.floor(ctx.canvas.height / 2);
            const sampleSize = 100;
            
            for (let x = centerX - sampleSize; x < centerX + sampleSize; x += 5) {
                for (let y = centerY - sampleSize; y < centerY + sampleSize; y += 5) {
                    if (x < 0 || y < 0 || x >= ctx.canvas.width || y >= ctx.canvas.height) continue;
                    
                    const idx = (y * ctx.canvas.width + x) * 4;
                    r += data[idx];
                    g += data[idx + 1];
                    b += data[idx + 2];
                    pixels++;
                }
            }
            
            if (pixels > 0) {
                r = Math.floor(r / pixels);
                g = Math.floor(g / pixels);
                b = Math.floor(b / pixels);
            }
            
            let minDistance = Infinity;
            let detectedSubject = null;
            
            for (const [subject, color] of Object.entries(textbookColors)) {
                const distance = Math.sqrt(
                    Math.pow(r - color.r, 2) +
                    Math.pow(g - color.g, 2) +
                    Math.pow(b - color.b, 2)
                );
                
                if (distance < minDistance && distance < 100) {
                    minDistance = distance;
                    detectedSubject = subject;
                }
            }
            
            const colorHex = '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            document.getElementById('colorAnalysis').textContent = colorHex;
            document.getElementById('colorAnalysis').style.color = colorHex;
            
            return { subject: detectedSubject, color: { r, g, b } };
        }
        
        function detectSubject(text, colorResult) {
            let maxScore = 0;
            let detectedSubject = null;
            
            for (const [subject, keywords] of Object.entries(textbookKeywords)) {
                let score = 0;
                
                keywords.forEach(keyword => {
                    if (text.includes(keyword.toLowerCase())) {
                        score += 10;
                    }
                });
                
                if (colorResult.subject === subject) {
                    score += 5;
                }
                
                if (score > maxScore) {
                    maxScore = score;
                    detectedSubject = subject;
                }
            }
            
            return maxScore > 0 ? detectedSubject : null;
        }
        
        // Subject & Timer
        function setCurrentSubject(subject) {
            if (currentSubject && subjectStartTime) {
                const elapsed = Date.now() - subjectStartTime;
                subjectTimers[currentSubject] += elapsed;
                updateSubjectTime(currentSubject);
            }
            
            currentSubject = subject;
            subjectStartTime = Date.now();
            
            document.getElementById('currentSubject').textContent = subject;
            document.getElementById('subjectIndicator').classList.remove('hidden');
            
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === subject) btn.classList.add('active');
            });
            
            showStartLearningButton();
        }
        
        function selectSubject(subject) {
            setCurrentSubject(subject);
            updateStatus(`ğŸ“š ${subject} ì„ íƒë¨`, 'recognized');
            showStartLearningButton();
        }
        
        function updateSubjectTime(subject) {
            const minutes = Math.floor(subjectTimers[subject] / 60000);
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            
            let timeText = hours > 0 ? `${hours}ì‹œê°„ ${mins}ë¶„` : `${mins}ë¶„`;
            
            document.getElementById(`time-${subject}`).textContent = timeText;
            updateStatistics();
        }
        
        function startTotalTimer() {
            if (totalTimerInterval) return;
            
            totalStartTime = Date.now();
            isTracking = true;
            
            totalTimerInterval = setInterval(() => {
                const elapsed = Date.now() - totalStartTime;
                const hours = Math.floor(elapsed / 3600000);
                const minutes = Math.floor((elapsed % 3600000) / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                
                document.getElementById('totalTimer').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                if (currentSubject && subjectStartTime) updateSubjectTime(currentSubject);
                
                updateDashboard();
            }, 1000);
        }
        
        function stopTotalTimer() {
            if (totalTimerInterval) {
                clearInterval(totalTimerInterval);
                totalTimerInterval = null;
            }
            
            if (currentSubject && subjectStartTime) {
                const elapsed = Date.now() - subjectStartTime;
                subjectTimers[currentSubject] += elapsed;
                updateSubjectTime(currentSubject);
            }
            
            isTracking = false;
        }
        
        // Statistics
        function updateStatistics() {
            let totalMinutes = 0;
            let topSubject = '';
            let maxTime = 0;
            
            for (const [subject, time] of Object.entries(subjectTimers)) {
                totalMinutes += Math.floor(time / 60000);
                if (time > maxTime) {
                    maxTime = time;
                    topSubject = subject;
                }
            }
            
            const hours = Math.floor(totalMinutes / 60);
            const mins = totalMinutes % 60;
            
            document.getElementById('totalStudyTime').textContent = `${hours}ì‹œê°„ ${mins}ë¶„`;
            document.getElementById('topSubject').textContent = topSubject || '-';
            
            const concentration = Math.min(100, Math.floor(70 + Math.random() * 30));
            document.getElementById('concentration').textContent = concentration + '%';
            
            const achievement = Math.min(100, Math.floor((totalMinutes / 480) * 100));
            document.getElementById('achievement').textContent = achievement + '%';
        }
        
        function updateDashboard() {
            if (!isTracking) return;
            
            const totalMinutes = Object.values(subjectTimers).reduce((sum, time) => sum + Math.floor(time / 60000), 0);
            const hours = Math.floor(totalMinutes / 60);
            
            document.getElementById('weeklyHours').textContent = hours + 'h';
            
            const achievement = Math.min(100, Math.floor((totalMinutes / 480) * 100));
            document.getElementById('dashAchievement').textContent = achievement + '%';
        }
        
        function updateStatus(message, type) {
            const statusDiv = document.getElementById('recognitionStatus');
            statusDiv.textContent = message;
            
            statusDiv.className = 'recognition-status';
            if (type === 'detecting') statusDiv.classList.add('status-detecting');
            else if (type === 'recognized') statusDiv.classList.add('status-recognized');
            else if (type === 'error') statusDiv.classList.add('status-error');
            else statusDiv.classList.add('status-none');
        }
        
        // University Functions
        function updateDepartments() {
            const univ = document.getElementById('targetUniversity').value;
            const deptSelect = document.getElementById('targetDepartment');
            
            deptSelect.innerHTML = '<option value="">í•™ê³¼ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
            
            if (univ && universityDB[univ]) {
                Object.keys(universityDB[univ].departments).forEach(dept => {
                    const option = document.createElement('option');
                    option.value = dept;
                    option.textContent = dept;
                    deptSelect.appendChild(option);
                });
            }
        }
        
        function generatePlanFromGoal() {
            const univ = document.getElementById('targetUniversity').value;
            const dept = document.getElementById('targetDepartment').value;
            const days = document.getElementById('daysRemaining').value;
            
            if (!univ || !dept) {
                alert('ëŒ€í•™ê³¼ í•™ê³¼ ì„ íƒ');
                return;
            }
            
            const deptInfo = universityDB[univ].departments[dept];
            const resultDiv = document.getElementById('goalResult');
            const studyHours = calculateStudyHours(deptInfo.avgGrade, days);
            
            resultDiv.innerHTML = `
                <h3>ğŸ¯ ${univ} ${dept} í•™ìŠµ ê³„íš</h3>
                <div style="margin: 15px 0;">
                    <h4>ğŸ“Š ì…ì‹œ ì •ë³´</h4>
                    <p>â€¢ í‰ê·  ë“±ê¸‰: <strong>${deptInfo.avgGrade}ë“±ê¸‰</strong></p>
                    <p>â€¢ ê²½ìŸë¥ : <strong>${deptInfo.competition}:1</strong></p>
                    <p>â€¢ ìµœì € ì ìˆ˜: <strong>${deptInfo.minScore}ì </strong></p>
                </div>
                <div style="margin: 15px 0;">
                    <h4>ğŸ“š í•„ìš” í•™ìŠµëŸ‰</h4>
                    <p>â€¢ ì´ ì‹œê°„: <strong>${studyHours.total}ì‹œê°„</strong></p>
                    <p>â€¢ ì¼ì¼: <strong>${studyHours.daily}ì‹œê°„</strong></p>
                    <p>â€¢ ì£¼ê°„: <strong>${studyHours.weekly}ì‹œê°„</strong></p>
                </div>
                <div style="margin: 15px 0;">
                    <h4>ğŸ“… ê³¼ëª©ë³„ ê³„íš</h4>
                    <div class="study-plan">
                        <strong>ìˆ˜í•™ (${studyHours.subjects.math}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ê°œë…: 2ì‹œê°„/ì¼</p>
                    </div>
                    <div class="study-plan">
                        <strong>ì˜ì–´ (${studyHours.subjects.english}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ë…í•´: 2ì‹œê°„/ì¼</p>
                    </div>
                    <div class="study-plan">
                        <strong>êµ­ì–´ (${studyHours.subjects.korean}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ë¹„ë¬¸í•™: 2ì‹œê°„/ì¼</p>
                    </div>
                </div>
                <div style="margin: 15px 0; padding: 12px; background: #e6f7ff; border-radius: 8px;">
                    <h4>ğŸ¤– AI ì¶”ì²œ</h4>
                    <p>â€¢ ${deptInfo.avgGrade}ë“±ê¸‰ê¹Œì§€ <strong>${Math.ceil(studyHours.total/100)*100}ì‹œê°„</strong> í•„ìš”</p>
                    <p>â€¢ ë§¤ì¼ <strong>${studyHours.daily}ì‹œê°„</strong> í•™ìŠµ</p>
                    <p>â€¢ ëª¨ì˜ê³ ì‚¬ ì›” 2íšŒ</p>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
        }
        
        function calculateStudyHours(targetGrade, days) {
            const currentGrade = 3;
            const gradeGap = currentGrade - targetGrade;
            const baseHours = gradeGap * 500;
            
            return {
                total: baseHours,
                daily: Math.round(baseHours / days * 10) / 10,
                weekly: Math.round(baseHours / days * 7 * 10) / 10,
                subjects: {
                    math: Math.round(baseHours * 0.35 / days * 7 * 10) / 10,
                    english: Math.round(baseHours * 0.25 / days * 7 * 10) / 10,
                    korean: Math.round(baseHours * 0.25 / days * 7 * 10) / 10,
                    science: Math.round(baseHours * 0.15 / days * 7 * 10) / 10
                }
            };
        }
        
        function recommendUniversities() {
            const grades = {
                korean: parseInt(document.getElementById('grade-korean').value),
                math: parseInt(document.getElementById('grade-math').value),
                english: parseInt(document.getElementById('grade-english').value),
                science1: parseInt(document.getElementById('grade-science1').value),
                science2: parseInt(document.getElementById('grade-science2').value)
            };
            
            const avgGrade = Object.values(grades).reduce((a, b) => a + b, 0) / 5;
            const resultDiv = document.getElementById('currentResult');
            
            const recommendations = [];
            
            for (const [univName, univData] of Object.entries(universityDB)) {
                for (const [deptName, deptData] of Object.entries(univData.departments)) {
                    if (avgGrade <= deptData.avgGrade + 0.5) {
                        recommendations.push({
                            university: univName,
                            department: deptName,
                            avgGrade: deptData.avgGrade,
                            competition: deptData.competition,
                            probability: calculateProbability(avgGrade, deptData.avgGrade)
                        });
                    }
                }
            }
            
            recommendations.sort((a, b) => b.probability - a.probability);
            
            let html = `
                <h3>ğŸ“ ì¶”ì²œ ëŒ€í•™</h3>
                <p>í‰ê·  ë“±ê¸‰: <strong>${avgGrade.toFixed(1)}ë“±ê¸‰</strong></p>
                <h4>ìƒìœ„ 10ê°œ</h4>
            `;
            
            recommendations.slice(0, 10).forEach(rec => {
                html += `
                    <div class="university-recommendation">
                        <strong>${rec.university} ${rec.department}</strong>
                        <p>â€¢ ê°€ëŠ¥ì„±: <strong>${rec.probability}%</strong></p>
                        <p>â€¢ í‰ê· : ${rec.avgGrade}ë“±ê¸‰</p>
                        <p>â€¢ ê²½ìŸ: ${rec.competition}:1</p>
                    </div>
                `;
            });
            
            html += `
                <div style="margin-top: 20px;">
                    <h4>ğŸ“š í•™ìŠµ ì „ëµ</h4>
                    <div class="study-plan">
                        <strong>ë‹¨ê¸° (3ê°œì›”)</strong>
                        <p>â€¢ ${avgGrade.toFixed(1)} â†’ ${(avgGrade - 0.5).toFixed(1)}ë“±ê¸‰</p>
                        <p>â€¢ ì¼ì¼ 8ì‹œê°„</p>
                    </div>
                    <div class="study-plan">
                        <strong>ì¤‘ê¸° (6ê°œì›”)</strong>
                        <p>â€¢ ${(avgGrade - 1).toFixed(1)}ë“±ê¸‰</p>
                        <p>â€¢ ì¼ì¼ 10ì‹œê°„</p>
                    </div>
                </div>
            `;
            
            resultDiv.innerHTML = html;
            resultDiv.classList.remove('hidden');
        }
        
        function calculateProbability(currentGrade, requiredGrade) {
            const gap = requiredGrade - currentGrade;
            if (gap >= 0) return 95;
            if (gap >= -0.5) return 80;
            if (gap >= -1) return 60;
            if (gap >= -1.5) return 40;
            return 20;
        }
        
        // PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(console.log);
            });
        }
        
        // Init
        window.onload = function() {
            console.log('StudyLens AI ì¤€ë¹„ ì™„ë£Œ v1.2');
            
            // Chart
            const canvas = document.getElementById('weeklyChart');
            if (canvas && canvas.getContext) {
                const ctx = canvas.getContext('2d');
                const data = [6, 7, 8, 6, 9, 8, 7];
                const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
                const barWidth = 40;
                const barGap = 20;
                const startX = 50;
                const startY = 150;
                const maxHeight = 100;
                
                ctx.fillStyle = '#4c51bf';
                data.forEach((value, index) => {
                    const height = (value / 10) * maxHeight;
                    ctx.fillRect(startX + index * (barWidth + barGap), startY - height, barWidth, height);
                    
                    ctx.fillStyle = '#333';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(days[index], startX + index * (barWidth + barGap) + barWidth / 2, startY + 20);
                    ctx.fillText(value + 'h', startX + index * (barWidth + barGap) + barWidth / 2, startY - height - 10);
                    
                    ctx.fillStyle = '#4c51bf';
                });
            }
            
            // íš¨ìœ¨ì„± ì°¨íŠ¸ ì´ˆê¸°í™”
            setTimeout(() => {
                updateEfficiencyChart();
                calculateEfficiency();
            }, 500);
        };
        
        // ========== í•™ìŠµ íš¨ìœ¨ì„± ë¶„ì„ ê´€ë ¨ ì½”ë“œ ==========
        const efficiencyData = {
            mockExams: [],
            schoolExams: [],
            studyHours: {},
            efficiencyScores: []
        };

        // ëª¨ì˜ê³ ì‚¬ ì„±ì  ì €ì¥
        function saveMockExam() {
            const korean = document.getElementById('mock-korean').value;
            const math = document.getElementById('mock-math').value;
            const english = document.getElementById('mock-english').value;
            const date = document.getElementById('mock-date').value;

            if (!korean || !math || !english || !date) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const examData = {
                korean: parseInt(korean),
                math: parseInt(math),
                english: parseInt(english),
                date: date,
                timestamp: Date.now()
            };

            efficiencyData.mockExams.push(examData);
            localStorage.setItem('efficiencyData', JSON.stringify(efficiencyData));
            
            calculateEfficiency();
            alert('ëª¨ì˜ê³ ì‚¬ ì„±ì ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('mock-korean').value = '';
            document.getElementById('mock-math').value = '';
            document.getElementById('mock-english').value = '';
        }

        // ë‚´ì‹  ì„±ì  ì €ì¥
        function saveSchoolExam() {
            const korean = document.getElementById('school-korean').value;
            const math = document.getElementById('school-math').value;
            const english = document.getElementById('school-english').value;
            const type = document.getElementById('exam-type').value;

            if (!korean || !math || !english) {
                alert('ëª¨ë“  ê³¼ëª© ì ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const examData = {
                korean: parseInt(korean),
                math: parseInt(math),
                english: parseInt(english),
                type: type,
                timestamp: Date.now()
            };

            efficiencyData.schoolExams.push(examData);
            localStorage.setItem('efficiencyData', JSON.stringify(efficiencyData));
            
            calculateEfficiency();
            alert('ë‚´ì‹  ì„±ì ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('school-korean').value = '';
            document.getElementById('school-math').value = '';
            document.getElementById('school-english').value = '';
        }

        // í•™ìŠµ íš¨ìœ¨ì„± ê³„ì‚°
        function calculateEfficiency() {
            // ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            const savedData = localStorage.getItem('efficiencyData');
            if (savedData) {
                Object.assign(efficiencyData, JSON.parse(savedData));
            }

            // ì„±ì  ë³€í™”ìœ¨ ê³„ì‚°
            if (efficiencyData.mockExams.length >= 2) {
                const recent = efficiencyData.mockExams[efficiencyData.mockExams.length - 1];
                const previous = efficiencyData.mockExams[efficiencyData.mockExams.length - 2];
                
                const koreanChange = previous.korean - recent.korean;
                const mathChange = previous.math - recent.math;
                const englishChange = previous.english - recent.english;
                
                const avgChange = (koreanChange + mathChange + englishChange) / 3;
                
                // íš¨ìœ¨ì„± ì ìˆ˜ ê³„ì‚°
                let efficiencyScore = 70;
                
                if (avgChange > 0) {
                    efficiencyScore += avgChange * 10;
                } else {
                    efficiencyScore += avgChange * 5;
                }
                
                // í•™ìŠµ ì‹œê°„ ëŒ€ë¹„ ì„±ì  í–¥ìƒë„ ë°˜ì˜
                const totalTime = Object.values(subjectTimers).reduce((sum, time) => sum + time, 0);
                const hoursStudied = totalTime / (1000 * 60 * 60);
                const hoursPerGrade = hoursStudied / Math.max(avgChange, 0.1);
                
                if (hoursPerGrade < 50) {
                    efficiencyScore += 10;
                } else if (hoursPerGrade > 100) {
                    efficiencyScore -= 10;
                }
                
                // ì ìˆ˜ ë²”ìœ„ ì œí•œ
                efficiencyScore = Math.min(100, Math.max(0, efficiencyScore));
                
                // UI ì—…ë°ì´íŠ¸
                const scoreElement = document.getElementById('efficiencyScore');
                if (scoreElement) {
                    scoreElement.textContent = Math.round(efficiencyScore) + 'ì ';
                }
                
                // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                updateEfficiencyChart();
            }
        }

        // íš¨ìœ¨ì„± ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function updateEfficiencyChart() {
            const canvas = document.getElementById('efficiencyChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.offsetWidth;
            const height = 180;
            
            canvas.width = width;
            canvas.height = height;
            
            // ìƒ˜í”Œ ë°ì´í„°
            const labels = ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'];
            const efficiencyScores = [65, 68, 72, 70, 75, 78];
            
            const padding = 40;
            const chartWidth = width - padding * 2;
            const chartHeight = height - padding * 2;
            const stepX = chartWidth / (labels.length - 1);
            
            // ë°°ê²½ ê·¸ë¦¬ë“œ
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 4; i++) {
                const y = padding + (chartHeight / 4) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            // íš¨ìœ¨ì„± ì ìˆ˜ ê·¸ë˜í”„
            ctx.strokeStyle = '#4c51bf';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            efficiencyScores.forEach((score, index) => {
                const x = padding + stepX * index;
                const y = padding + chartHeight - (score / 100 * chartHeight);
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                // ì  ê·¸ë¦¬ê¸°
                ctx.fillStyle = '#4c51bf';
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            });
            ctx.stroke();
            
            // ë ˆì´ë¸”
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            labels.forEach((label, index) => {
                const x = padding + stepX * index;
                ctx.fillText(label, x, height - 15);
            });
            
            // ì œëª©
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('íš¨ìœ¨ì„± ì§€ìˆ˜ (%)', 10, 20);
        }
    </script>
</body>
</html>
