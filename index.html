<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>StudyLens AI</title>

<script src="https://unpkg.com/tesseract.js@4.0.2/dist/tesseract.min.js"></script>

<style>
/* ===============================
   GLOBAL
================================ */
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Noto Sans KR', sans-serif;
    background: linear-gradient(135deg,#667eea,#764ba2);
}

/* ===============================
   FIXED TOP NAV (MOBILE SAFE)
================================ */
.top-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #ffffff;
    z-index: 9999;
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
}

.top-nav-inner {
    display: flex;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.top-nav a {
    flex: 1 0 auto;
    min-width: 120px;
    text-align: center;
    padding: 14px 10px;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    color: white;
    background: #4c51bf;
    border-right: 1px solid rgba(255,255,255,0.2);
}

.top-nav a:last-child { border-right: none; }

/* ===============================
   CONTENT OFFSET
================================ */
.content {
    padding-top: 70px; /* ë©”ë‰´ ë†’ì´ë§Œí¼ ë°€ê¸° */
    padding-left: 15px;
    padding-right: 15px;
}

/* ===============================
   SECTION CARD
================================ */
.section {
    background: white;
    border-radius: 14px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* ===============================
   CAMERA
================================ */
.camera-container {
    position: relative;
    max-width: 640px;
    margin: 0 auto;
}

video, canvas {
    width: 100%;
    border-radius: 12px;
    border: 3px solid #4c51bf;
}

/* ===============================
   BUTTONS
================================ */
button {
    margin: 5px;
    padding: 12px 20px;
    border-radius: 8px;
    border: none;
    background: #4c51bf;
    color: white;
    font-weight: 600;
    cursor: pointer;
}

/* ===============================
   SUBJECT BUTTONS
================================ */
.subject-btn {
    border: 2px solid #4c51bf;
    background: white;
    color: #4c51bf;
    border-radius: 8px;
    padding: 10px;
}
.subject-btn.active {
    background: #4c51bf;
    color: white;
}

/* ===============================
   RESPONSIVE
================================ */
@media (max-width:768px){
    button { width:100%; }
}
</style>
</head>

<body>

<!-- ===============================
     FIXED NAV
================================ -->
<nav class="top-nav">
    <div class="top-nav-inner">
        <a href="#tracker">ğŸ“¸ êµê³¼ì„œ ì¸ì‹</a>
        <a href="#goal">ğŸ¯ ëª©í‘œ ëŒ€í•™</a>
        <a href="#grade">ğŸ“Š ì„±ì  ë¶„ì„</a>
        <a href="#dashboard">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ</a>
    </div>
</nav>

<div class="content">

<!-- ===============================
     SECTION 1
================================ -->
<section id="tracker" class="section">
<h2>ğŸ“¸ êµê³¼ì„œ ìë™ ì¸ì‹</h2>

<div class="camera-container">
    <video id="webcam" autoplay playsinline></video>
    <canvas id="canvas"></canvas>
</div>

<button onclick="startCamera()">ğŸ¥ ì¹´ë©”ë¼ ì‹œì‘</button>
<button onclick="captureTextbook()">ğŸ“¸ ìˆ˜ë™ ì¸ì‹</button>
<button onclick="startAutoRecognition()">ğŸ”„ ìë™ ì¸ì‹</button>

<p id="status">ëŒ€ê¸°ì¤‘...</p>

<div>
<button class="subject-btn" onclick="selectSubject('êµ­ì–´')">êµ­ì–´</button>
<button class="subject-btn" onclick="selectSubject('ìˆ˜í•™')">ìˆ˜í•™</button>
<button class="subject-btn" onclick="selectSubject('ì˜ì–´')">ì˜ì–´</button>
<button class="subject-btn" onclick="selectSubject('ë¬¼ë¦¬')">ë¬¼ë¦¬</button>
<button class="subject-btn" onclick="selectSubject('í™”í•™')">í™”í•™</button>
</div>
</section>

<!-- ===============================
     SECTION 2
================================ -->
<section id="goal" class="section">
<h2>ğŸ¯ ëª©í‘œ ëŒ€í•™ ì„¤ì •</h2>
<select>
<option>ì„œìš¸ëŒ€í•™êµ</option>
<option>ì—°ì„¸ëŒ€í•™êµ</option>
<option>ê³ ë ¤ëŒ€í•™êµ</option>
</select>
</section>

<!-- ===============================
     SECTION 3
================================ -->
<section id="grade" class="section">
<h2>ğŸ“Š ì„±ì  ë¶„ì„</h2>
<input type="number" placeholder="êµ­ì–´ ë“±ê¸‰">
<input type="number" placeholder="ìˆ˜í•™ ë“±ê¸‰">
<input type="number" placeholder="ì˜ì–´ ë“±ê¸‰">
</section>

<!-- ===============================
     SECTION 4
================================ -->
<section id="dashboard" class="section">
<h2>ğŸ“ˆ í•™ìŠµ ëŒ€ì‹œë³´ë“œ</h2>
<p>ì£¼ê°„ í•™ìŠµ ì‹œê°„ / ëª©í‘œ ë‹¬ì„±ë¥ </p>
</section>

</div>

<script>
let stream;
let autoInterval;

const keywords = {
    êµ­ì–´: ['êµ­ì–´','ë¬¸í•™','ë…ì„œ'],
    ìˆ˜í•™: ['ìˆ˜í•™','ë¯¸ì ë¶„','í™•ë¥ '],
    ì˜ì–´: ['english','ì˜ì–´'],
    ë¬¼ë¦¬: ['ë¬¼ë¦¬','physics'],
    í™”í•™: ['í™”í•™','chemistry']
};

async function startCamera(){
    stream = await navigator.mediaDevices.getUserMedia({ video:{ facingMode:'environment' }});
    document.getElementById('webcam').srcObject = stream;
}

async function captureTextbook(){
    const video = document.getElementById('webcam');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video,0,0);

    document.getElementById('status').innerText = 'OCR ì¸ì‹ ì¤‘...';

    const result = await Tesseract.recognize(canvas,'kor+eng');
    const text = result.data.text.toLowerCase();

    for(const subject in keywords){
        if(keywords[subject].some(k=>text.includes(k))){
            document.getElementById('status').innerText =
                `âœ… ${subject} êµê³¼ì„œ ì¸ì‹ë¨`;
            return;
        }
    }
    document.getElementById('status').innerText = 'âŒ ì¸ì‹ ì‹¤íŒ¨ (ìˆ˜ë™ ì„ íƒ ê°€ëŠ¥)';
}

function startAutoRecognition(){
    if(autoInterval) return;
    autoInterval = setInterval(captureTextbook,3000);
}

function selectSubject(sub){
    document.getElementById('status').innerText = `ğŸ“š ${sub} ìˆ˜ë™ ì„ íƒ`;
}
</script>

</body>
</html>
