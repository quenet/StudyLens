<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyLens AI - ë¡œì»¬ MVP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .tab {
            background: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: #4c51bf;
            color: white;
        }
        
        .content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #4c51bf;
        }
        
        button {
            background: #4c51bf;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .grade-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .result-box {
            background: #f7f7f7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .study-plan {
            background: white;
            border-left: 4px solid #4c51bf;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .camera-section {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        #webcam {
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            margin: 10px 0;
        }
        
        .timer {
            font-size: 48px;
            font-weight: bold;
            color: #4c51bf;
            text-align: center;
            margin: 20px 0;
        }
        
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin: 5px;
        }
        
        .status.studying {
            background: #48bb78;
            color: white;
        }
        
        .status.break {
            background: #f56565;
            color: white;
        }
        
        .university-recommendation {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .feature-preview {
            opacity: 0.5;
            pointer-events: none;
            border: 2px dashed #ccc;
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š StudyLens AI - MVP ë¡œì»¬ ë²„ì „</h1>
            <p style="color: #666; margin-top: 10px;">AI ê¸°ë°˜ ë§ì¶¤í˜• í•™ìŠµ ê³„íš ìƒì„±ê¸°</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('goal')">ğŸ¯ ëª©í‘œ ëŒ€í•™ ì„¤ì •</button>
            <button class="tab" onclick="switchTab('current')">ğŸ“Š í˜„ì¬ ì„±ì  ì…ë ¥</button>
            <button class="tab" onclick="switchTab('tracker')">ğŸ“¸ í•™ìŠµ ì¶”ì </button>
            <button class="tab" onclick="switchTab('dashboard')">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ</button>
        </div>

        <!-- ëª©í‘œ ëŒ€í•™ ì„¤ì • íƒ­ -->
        <div id="goal-tab" class="content">
            <h2 style="margin-bottom: 20px;">ëª©í‘œ ëŒ€í•™ì—ì„œ ì—­ì‚°í•œ í•™ìŠµ ê³„íš</h2>
            
            <div class="form-group">
                <label>ëª©í‘œ ëŒ€í•™ ì„ íƒ</label>
                <select id="targetUniversity" onchange="updateDepartments()">
                    <option value="">ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì„œìš¸ëŒ€">ì„œìš¸ëŒ€í•™êµ</option>
                    <option value="ì—°ì„¸ëŒ€">ì—°ì„¸ëŒ€í•™êµ</option>
                    <option value="ê³ ë ¤ëŒ€">ê³ ë ¤ëŒ€í•™êµ</option>
                    <option value="ì„±ê· ê´€ëŒ€">ì„±ê· ê´€ëŒ€í•™êµ</option>
                    <option value="í•œì–‘ëŒ€">í•œì–‘ëŒ€í•™êµ</option>
                    <option value="ì„œê°•ëŒ€">ì„œê°•ëŒ€í•™êµ</option>
                    <option value="ì¤‘ì•™ëŒ€">ì¤‘ì•™ëŒ€í•™êµ</option>
                    <option value="ê²½í¬ëŒ€">ê²½í¬ëŒ€í•™êµ</option>
                    <option value="í•œêµ­ì™¸ëŒ€">í•œêµ­ì™¸êµ­ì–´ëŒ€í•™êµ</option>
                    <option value="ì„œìš¸ì‹œë¦½ëŒ€">ì„œìš¸ì‹œë¦½ëŒ€í•™êµ</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ëª©í‘œ í•™ê³¼ ì„ íƒ</label>
                <select id="targetDepartment">
                    <option value="">ë¨¼ì € ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ìˆ˜ëŠ¥ê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜</label>
                <input type="number" id="daysRemaining" value="300" min="1" max="365">
            </div>
            
            <button onclick="generatePlanFromGoal()">ğŸ¤– AI í•™ìŠµ ê³„íš ìƒì„±</button>
            
            <div id="goalResult" class="result-box hidden"></div>
        </div>

        <!-- í˜„ì¬ ì„±ì  ì…ë ¥ íƒ­ -->
        <div id="current-tab" class="content hidden">
            <h2 style="margin-bottom: 20px;">í˜„ì¬ ì„±ì  ê¸°ë°˜ ëŒ€í•™ ì¶”ì²œ</h2>
            
            <div class="form-group">
                <label>í˜„ì¬ ë“±ê¸‰ ì…ë ¥ (1-9ë“±ê¸‰)</label>
                <div class="grade-inputs">
                    <div>
                        <label style="font-weight: normal; font-size: 14px;">êµ­ì–´</label>
                        <input type="number" id="grade-korean" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 14px;">ìˆ˜í•™</label>
                        <input type="number" id="grade-math" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 14px;">ì˜ì–´</label>
                        <input type="number" id="grade-english" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 14px;">íƒêµ¬1</label>
                        <input type="number" id="grade-science1" min="1" max="9" value="3">
                    </div>
                    <div>
                        <label style="font-weight: normal; font-size: 14px;">íƒêµ¬2</label>
                        <input type="number" id="grade-science2" min="1" max="9" value="3">
                    </div>
                </div>
            </div>
            
            <button onclick="recommendUniversities()">ğŸ“ ì§„í•™ ê°€ëŠ¥ ëŒ€í•™ ì¶”ì²œ</button>
            
            <div id="currentResult" class="result-box hidden"></div>
        </div>

        <!-- í•™ìŠµ ì¶”ì  íƒ­ -->
        <div id="tracker-tab" class="content hidden">
            <h2 style="margin-bottom: 20px;">AI í•™ìŠµ ì‹œê°„ ì¶”ì </h2>
            
            <div class="camera-section">
                <h3>ğŸ“¸ ì°©ì„ ê°ì§€ ì¹´ë©”ë¼</h3>
                <video id="webcam" autoplay playsinline></video>
                <div style="margin: 10px 0;">
                    <button onclick="startTracking()" id="startBtn">â–¶ï¸ í•™ìŠµ ì‹œì‘</button>
                    <button onclick="stopTracking()" id="stopBtn" disabled>â¹ï¸ í•™ìŠµ ì¢…ë£Œ</button>
                </div>
                
                <div class="timer" id="timer">00:00:00</div>
                
                <div style="text-align: center;">
                    <span class="status studying" id="studyStatus">ëŒ€ê¸°ì¤‘</span>
                    <span class="status break hidden" id="breakStatus">ìë¦¬ë¹„ì›€</span>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                    <p><strong>ì˜¤ëŠ˜ì˜ í•™ìŠµ í†µê³„</strong></p>
                    <p>ì´ í•™ìŠµ ì‹œê°„: <span id="totalTime">0ì‹œê°„ 0ë¶„</span></p>
                    <p>ì§‘ì¤‘ë„: <span id="concentration">0%</span></p>
                    <p>íœ´ì‹ íšŸìˆ˜: <span id="breakCount">0íšŒ</span></p>
                </div>
            </div>
            
            <!-- ì°¨ê¸° ë²„ì „ ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸° -->
            <div class="feature-preview">
                <h3>ğŸ”® Next Version: êµì¬ ìë™ ì¸ì‹</h3>
                <p>ì¹´ë©”ë¼ë¡œ êµì¬ë¥¼ ì¸ì‹í•˜ì—¬ ê³¼ëª©ê³¼ ë‹¨ì›ì„ ìë™ìœ¼ë¡œ ê¸°ë¡í•©ë‹ˆë‹¤</p>
                <ul style="text-align: left; display: inline-block;">
                    <li>êµì¬ëª… ìë™ ì¸ì‹</li>
                    <li>í˜ì´ì§€ ì¶”ì </li>
                    <li>ë¬¸ì œ í’€ì´ ì‹œê°„ ì¸¡ì •</li>
                    <li>ì˜¤ë‹µ ìë™ ê¸°ë¡</li>
                </ul>
            </div>
        </div>

        <!-- ëŒ€ì‹œë³´ë“œ íƒ­ -->
        <div id="dashboard-tab" class="content hidden">
            <h2 style="margin-bottom: 20px;">í•™ìŠµ ëŒ€ì‹œë³´ë“œ</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">D-287</div>
                    <div class="stat-label">ìˆ˜ëŠ¥ê¹Œì§€</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">42h</div>
                    <div class="stat-label">ì£¼ê°„ í•™ìŠµ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">78%</div>
                    <div class="stat-label">ëª©í‘œ ë‹¬ì„±ë¥ </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">15ìœ„</div>
                    <div class="stat-label">ì „ì²´ ë­í‚¹</div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>ğŸ“Š ì£¼ê°„ í•™ìŠµ ë¶„ì„</h3>
                <canvas id="weeklyChart" width="400" height="200"></canvas>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>ğŸ¯ ì´ë²ˆ ì£¼ ëª©í‘œ</h3>
                <div class="study-plan">
                    <strong>ìˆ˜í•™:</strong> ë¯¸ì ë¶„ 3ë‹¨ì› ì™„ë£Œ (ì§„ë„ìœ¨ 65%)
                </div>
                <div class="study-plan">
                    <strong>ì˜ì–´:</strong> ëª¨ì˜ê³ ì‚¬ 3íšŒ (2/3 ì™„ë£Œ)
                </div>
                <div class="study-plan">
                    <strong>êµ­ì–´:</strong> ë¹„ë¬¸í•™ ì§€ë¬¸ 20ê°œ (18/20 ì™„ë£Œ)
                </div>
            </div>
        </div>
    </div>

    <script>
        // ëŒ€í•™ ë°ì´í„°ë² ì´ìŠ¤
        const universityDB = {
            "ì„œìš¸ëŒ€": {
                departments: {
                    "ê²½ì˜í•™ê³¼": { avgGrade: 1.2, competition: 15.3, minScore: 95 },
                    "ì»´í“¨í„°ê³µí•™ë¶€": { avgGrade: 1.3, competition: 12.8, minScore: 94 },
                    "ì˜ì˜ˆê³¼": { avgGrade: 1.0, competition: 25.4, minScore: 98 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 1.5, competition: 8.7, minScore: 92 }
                }
            },
            "ì—°ì„¸ëŒ€": {
                departments: {
                    "ê²½ì˜í•™ê³¼": { avgGrade: 1.4, competition: 18.2, minScore: 93 },
                    "ì „ê¸°ì „ìê³µí•™ë¶€": { avgGrade: 1.6, competition: 10.3, minScore: 91 },
                    "ì˜ì˜ˆê³¼": { avgGrade: 1.1, competition: 28.6, minScore: 97 },
                    "ë¬¸ê³¼ëŒ€í•™": { avgGrade: 1.8, competition: 7.5, minScore: 89 }
                }
            },
            "ê³ ë ¤ëŒ€": {
                departments: {
                    "ê²½ì˜ëŒ€í•™": { avgGrade: 1.5, competition: 16.8, minScore: 92 },
                    "ì»´í“¨í„°í•™ê³¼": { avgGrade: 1.7, competition: 14.2, minScore: 90 },
                    "ì˜ê³¼ëŒ€í•™": { avgGrade: 1.1, competition: 27.3, minScore: 97 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 1.8, competition: 9.5, minScore: 88 }
                }
            },
            "ì„±ê· ê´€ëŒ€": {
                departments: {
                    "ê¸€ë¡œë²Œê²½ì˜": { avgGrade: 1.8, competition: 12.5, minScore: 88 },
                    "ë°˜ë„ì²´ì‹œìŠ¤í…œ": { avgGrade: 1.9, competition: 11.2, minScore: 87 },
                    "ì†Œí”„íŠ¸ì›¨ì–´": { avgGrade: 2.0, competition: 10.8, minScore: 86 },
                    "ìì—°ê³¼í•™": { avgGrade: 2.2, competition: 8.3, minScore: 84 }
                }
            },
            "í•œì–‘ëŒ€": {
                departments: {
                    "íŒŒì´ë‚¸ìŠ¤ê²½ì˜": { avgGrade: 1.9, competition: 13.2, minScore: 87 },
                    "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´": { avgGrade: 2.0, competition: 11.5, minScore: 86 },
                    "ê¸°ê³„ê³µí•™": { avgGrade: 2.1, competition: 9.8, minScore: 85 },
                    "ê±´ì¶•í•™ë¶€": { avgGrade: 2.2, competition: 8.7, minScore: 84 }
                }
            },
            "ì„œê°•ëŒ€": {
                departments: {
                    "ê²½ì˜í•™": { avgGrade: 1.7, competition: 14.5, minScore: 90 },
                    "ì»´í“¨í„°ê³µí•™": { avgGrade: 1.8, competition: 12.3, minScore: 89 },
                    "ì „ìê³µí•™": { avgGrade: 1.9, competition: 10.2, minScore: 88 },
                    "ì¸ë¬¸í•™ë¶€": { avgGrade: 2.0, competition: 8.5, minScore: 86 }
                }
            },
            "ì¤‘ì•™ëŒ€": {
                departments: {
                    "ê²½ì˜ê²½ì œ": { avgGrade: 2.3, competition: 10.5, minScore: 83 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 2.5, competition: 8.2, minScore: 81 },
                    "ì˜í•™ë¶€": { avgGrade: 1.3, competition: 22.3, minScore: 94 },
                    "ì˜ˆìˆ ëŒ€í•™": { avgGrade: 2.8, competition: 15.2, minScore: 78 }
                }
            },
            "ê²½í¬ëŒ€": {
                departments: {
                    "í•œì˜ì˜ˆê³¼": { avgGrade: 1.5, competition: 20.5, minScore: 92 },
                    "í˜¸í…”ê²½ì˜": { avgGrade: 2.4, competition: 12.3, minScore: 82 },
                    "êµ­ì œí•™ë¶€": { avgGrade: 2.3, competition: 11.2, minScore: 83 },
                    "ê³µê³¼ëŒ€í•™": { avgGrade: 2.6, competition: 7.8, minScore: 80 }
                }
            },
            "í•œêµ­ì™¸ëŒ€": {
                departments: {
                    "í†µë²ˆì—­ëŒ€í•™": { avgGrade: 2.2, competition: 18.5, minScore: 84 },
                    "êµ­ì œì§€ì—­ëŒ€í•™": { avgGrade: 2.5, competition: 10.2, minScore: 81 },
                    "ê²½ì˜í•™ë¶€": { avgGrade: 2.6, competition: 8.7, minScore: 80 },
                    "ì–´ë¬¸í•™ë¶€": { avgGrade: 2.7, competition: 7.5, minScore: 79 }
                }
            },
            "ì„œìš¸ì‹œë¦½ëŒ€": {
                departments: {
                    "ë„ì‹œê³µí•™": { avgGrade: 2.2, competition: 12.8, minScore: 84 },
                    "ì„¸ë¬´í•™ê³¼": { avgGrade: 2.3, competition: 14.2, minScore: 83 },
                    "ë„ì‹œí–‰ì •": { avgGrade: 2.4, competition: 10.5, minScore: 82 },
                    "ììœ ì „ê³µ": { avgGrade: 2.5, competition: 8.3, minScore: 81 }
                }
            }
        };

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.content').forEach(tab => {
                tab.classList.add('hidden');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ ë³´ì´ê¸°
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');
            event.target.classList.add('active');
        }

        // í•™ê³¼ ì—…ë°ì´íŠ¸
        function updateDepartments() {
            const univ = document.getElementById('targetUniversity').value;
            const deptSelect = document.getElementById('targetDepartment');
            
            deptSelect.innerHTML = '<option value="">í•™ê³¼ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
            
            if (univ && universityDB[univ]) {
                Object.keys(universityDB[univ].departments).forEach(dept => {
                    const option = document.createElement('option');
                    option.value = dept;
                    option.textContent = dept;
                    deptSelect.appendChild(option);
                });
            }
        }

        // ëª©í‘œ ëŒ€í•™ ê¸°ë°˜ ê³„íš ìƒì„±
        function generatePlanFromGoal() {
            const univ = document.getElementById('targetUniversity').value;
            const dept = document.getElementById('targetDepartment').value;
            const days = document.getElementById('daysRemaining').value;
            
            if (!univ || !dept) {
                alert('ëŒ€í•™ê³¼ í•™ê³¼ë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const deptInfo = universityDB[univ].departments[dept];
            const resultDiv = document.getElementById('goalResult');
            
            // í•™ìŠµ ê³„íš ìƒì„±
            const studyHours = calculateStudyHours(deptInfo.avgGrade, days);
            
            resultDiv.innerHTML = `
                <h3>ğŸ¯ ${univ} ${dept} ë§ì¶¤ í•™ìŠµ ê³„íš</h3>
                
                <div style="margin: 20px 0;">
                    <h4>ğŸ“Š ì…ì‹œ ì •ë³´</h4>
                    <p>â€¢ í‰ê·  ë“±ê¸‰: <strong>${deptInfo.avgGrade}ë“±ê¸‰</strong></p>
                    <p>â€¢ ê²½ìŸë¥ : <strong>${deptInfo.competition}:1</strong></p>
                    <p>â€¢ ìµœì € ì ìˆ˜: <strong>${deptInfo.minScore}ì </strong></p>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>ğŸ“š í•„ìš” í•™ìŠµëŸ‰</h4>
                    <p>â€¢ ì´ í•™ìŠµ ì‹œê°„: <strong>${studyHours.total}ì‹œê°„</strong></p>
                    <p>â€¢ ì¼ì¼ í•™ìŠµ ì‹œê°„: <strong>${studyHours.daily}ì‹œê°„</strong></p>
                    <p>â€¢ ì£¼ê°„ í•™ìŠµ ì‹œê°„: <strong>${studyHours.weekly}ì‹œê°„</strong></p>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4>ğŸ“… ê³¼ëª©ë³„ í•™ìŠµ ê³„íš</h4>
                    <div class="study-plan">
                        <strong>ìˆ˜í•™ (${studyHours.subjects.math}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ê°œë… ì •ë¦¬: 2ì‹œê°„/ì¼</p>
                        <p>â€¢ ë¬¸ì œ í’€ì´: 3ì‹œê°„/ì¼</p>
                        <p>â€¢ ì˜¤ë‹µ ì •ë¦¬: 1ì‹œê°„/ì¼</p>
                    </div>
                    <div class="study-plan">
                        <strong>ì˜ì–´ (${studyHours.subjects.english}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ë‹¨ì–´ ì•”ê¸°: 1ì‹œê°„/ì¼</p>
                        <p>â€¢ ë…í•´ ì—°ìŠµ: 2ì‹œê°„/ì¼</p>
                        <p>â€¢ ë“£ê¸° ì—°ìŠµ: 30ë¶„/ì¼</p>
                    </div>
                    <div class="study-plan">
                        <strong>êµ­ì–´ (${studyHours.subjects.korean}ì‹œê°„/ì£¼)</strong>
                        <p>â€¢ ë¬¸í•™ ë¶„ì„: 1.5ì‹œê°„/ì¼</p>
                        <p>â€¢ ë¹„ë¬¸í•™ ë…í•´: 2ì‹œê°„/ì¼</p>
                        <p>â€¢ ë¬¸ë²• ì •ë¦¬: 30ë¶„/ì¼</p>
                    </div>
                </div>
                
                <div style="margin: 20px 0; padding: 15px; background: #e6f7ff; border-radius: 8px;">
                    <h4>ğŸ¤– AI ì¶”ì²œì‚¬í•­</h4>
                    <p>â€¢ í˜„ì¬ ë“±ê¸‰ 3ë“±ê¸‰ ê¸°ì¤€, ${deptInfo.avgGrade}ë“±ê¸‰ ë„ë‹¬ê¹Œì§€ <strong>${Math.ceil(studyHours.total/100)*100}ì‹œê°„</strong> í•„ìš”</p>
                    <p>â€¢ ë§¤ì¼ <strong>ìµœì†Œ ${studyHours.daily}ì‹œê°„</strong> í•™ìŠµ í•„ìˆ˜</p>
                    <p>â€¢ ì£¼ë§ ë³´ì¶© í•™ìŠµ <strong>ê¶Œì¥</strong></p>
                    <p>â€¢ ëª¨ì˜ê³ ì‚¬ <strong>ì›” 2íšŒ</strong> í•„ìˆ˜ ì‘ì‹œ</p>
                </div>
            `;
            
            resultDiv.classList.remove('hidden');
        }

        // í•™ìŠµ ì‹œê°„ ê³„ì‚°
        function calculateStudyHours(targetGrade, days) {
            const currentGrade = 3; // ê¸°ë³¸ê°’
            const gradeGap = currentGrade - targetGrade;
            const baseHours = gradeGap * 500; // ë“±ê¸‰ë‹¹ 500ì‹œê°„
            
            return {
                total: baseHours,
                daily: Math.round(baseHours / days * 10) / 10,
                weekly: Math.round(baseHours / days * 7 * 10) / 10,
                subjects: {
                    math: Math.round(baseHours * 0.35 / days * 7 * 10) / 10,
                    english: Math.round(baseHours * 0.25 / days * 7 * 10) / 10,
                    korean: Math.round(baseHours * 0.25 / days * 7 * 10) / 10,
                    science: Math.round(baseHours * 0.15 / days * 7 * 10) / 10
                }
            };
        }

        // ëŒ€í•™ ì¶”ì²œ
        function recommendUniversities() {
            const grades = {
                korean: parseInt(document.getElementById('grade-korean').value),
                math: parseInt(document.getElementById('grade-math').value),
                english: parseInt(document.getElementById('grade-english').value),
                science1: parseInt(document.getElementById('grade-science1').value),
                science2: parseInt(document.getElementById('grade-science2').value)
            };
            
            const avgGrade = (grades.korean + grades.math + grades.english + grades.science1 + grades.science2) / 5;
            const resultDiv = document.getElementById('currentResult');
            
            // ì§„í•™ ê°€ëŠ¥ ëŒ€í•™ ì°¾ê¸°
            const recommendations = [];
            
            for (const [univName, univData] of Object.entries(universityDB)) {
                for (const [deptName, deptData] of Object.entries(univData.departments)) {
                    if (avgGrade <= deptData.avgGrade + 0.5) {
                        recommendations.push({
                            university: univName,
                            department: deptName,
                            avgGrade: deptData.avgGrade,
                            competition: deptData.competition,
                            probability: calculateProbability(avgGrade, deptData.avgGrade)
                        });
                    }
                }
            }
            
            // í•©ê²© í™•ë¥  ìˆœìœ¼ë¡œ ì •ë ¬
            recommendations.sort((a, b) => b.probability - a.probability);
            
            let html = `
                <h3>ğŸ“ ì§„í•™ ê°€ëŠ¥ ëŒ€í•™ ì¶”ì²œ</h3>
                <p style="margin: 10px 0;">í˜„ì¬ í‰ê·  ë“±ê¸‰: <strong>${avgGrade.toFixed(1)}ë“±ê¸‰</strong></p>
                
                <h4 style="margin-top: 20px;">ğŸ“Š ì¶”ì²œ ëŒ€í•™ (ìƒìœ„ 10ê°œ)</h4>
            `;
            
            recommendations.slice(0, 10).forEach(rec => {
                html += `
                    <div class="university-recommendation">
                        <strong>${rec.university} ${rec.department}</strong>
                        <p>â€¢ í•©ê²© ê°€ëŠ¥ì„±: <strong>${rec.probability}%</strong></p>
                        <p>â€¢ í‰ê·  ë“±ê¸‰: ${rec.avgGrade}ë“±ê¸‰</p>
                        <p>â€¢ ê²½ìŸë¥ : ${rec.competition}:1</p>
                    </div>
                `;
            });
            
            html += `
                <div style="margin-top: 30px;">
                    <h4>ğŸ“š ë§ì¶¤ í•™ìŠµ ì „ëµ</h4>
                    <div class="study-plan">
                        <strong>ë‹¨ê¸° ëª©í‘œ (3ê°œì›”)</strong>
                        <p>â€¢ í˜„ì¬ ${avgGrade.toFixed(1)}ë“±ê¸‰ â†’ ${(avgGrade - 0.5).toFixed(1)}ë“±ê¸‰</p>
                        <p>â€¢ ì¼ì¼ í•™ìŠµ: 8ì‹œê°„</p>
                        <p>â€¢ ì£¼ê°„ ëª¨ì˜ê³ ì‚¬: 2íšŒ</p>
                    </div>
                    <div class="study-plan">
                        <strong>ì¤‘ê¸° ëª©í‘œ (6ê°œì›”)</strong>
                        <p>â€¢ ëª©í‘œ: ${(avgGrade - 1).toFixed(1)}ë“±ê¸‰ ë‹¬ì„±</p>
                        <p>â€¢ ì¼ì¼ í•™ìŠµ: 10ì‹œê°„</p>
                        <p>â€¢ ì•½ì  ê³¼ëª© ì§‘ì¤‘ ë³´ê°•</p>
                    </div>
                </div>
            `;
            
            resultDiv.innerHTML = html;
            resultDiv.classList.remove('hidden');
        }

        // í•©ê²© í™•ë¥  ê³„ì‚°
        function calculateProbability(currentGrade, requiredGrade) {
            const gap = requiredGrade - currentGrade;
            if (gap >= 0) return 95;
            if (gap >= -0.5) return 80;
            if (gap >= -1) return 60;
            if (gap >= -1.5) return 40;
            return 20;
        }

        // ì¹´ë©”ë¼ ê´€ë ¨ ë³€ìˆ˜
        let stream = null;
        let isTracking = false;
        let startTime = null;
        let timerInterval = null;
        let totalStudyTime = 0;
        let breakCount = 0;
        let lastDetectionTime = Date.now();

        // í•™ìŠµ ì¶”ì  ì‹œì‘
        async function startTracking() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                document.getElementById('webcam').srcObject = stream;
                
                isTracking = true;
                startTime = Date.now();
                
                document.getElementById('startBtn').disabled = true;
                document.getElementById('stopBtn').disabled = false;
                document.getElementById('studyStatus').textContent = 'í•™ìŠµì¤‘';
                document.getElementById('studyStatus').classList.add('studying');
                
                // íƒ€ì´ë¨¸ ì‹œì‘
                timerInterval = setInterval(updateTimer, 1000);
                
                // ì–¼êµ´ ê°ì§€ ì‹œì‘ (ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜)
                detectPresence();
                
            } catch (err) {
                alert('ì¹´ë©”ë¼ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                console.error(err);
            }
        }

        // í•™ìŠµ ì¶”ì  ì¢…ë£Œ
        function stopTracking() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            
            isTracking = false;
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('studyStatus').textContent = 'ì¢…ë£Œ';
            
            clearInterval(timerInterval);
            
            // ì´ í•™ìŠµ ì‹œê°„ ì—…ë°ì´íŠ¸
            const elapsed = Date.now() - startTime;
            totalStudyTime += elapsed;
            updateTotalTime();
        }

        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            if (startTime) {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const hours = Math.floor(elapsed / 3600);
                const minutes = Math.floor((elapsed % 3600) / 60);
                const seconds = elapsed % 60;
                
                document.getElementById('timer').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }

        // ì°©ì„ ê°ì§€ (ì‹œë®¬ë ˆì´ì…˜)
        function detectPresence() {
            if (!isTracking) return;
            
            // ì‹¤ì œë¡œëŠ” TensorFlow.js ë“±ì„ ì‚¬ìš©í•˜ì—¬ ì–¼êµ´ ê°ì§€
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            const isPresent = Math.random() > 0.1; // 90% í™•ë¥ ë¡œ ì°©ì„
            
            if (isPresent) {
                document.getElementById('studyStatus').classList.remove('hidden');
                document.getElementById('breakStatus').classList.add('hidden');
                lastDetectionTime = Date.now();
            } else {
                document.getElementById('studyStatus').classList.add('hidden');
                document.getElementById('breakStatus').classList.remove('hidden');
                breakCount++;
                document.getElementById('breakCount').textContent = breakCount + 'íšŒ';
            }
            
            // ì§‘ì¤‘ë„ ê³„ì‚°
            const concentration = Math.min(100, Math.floor(Math.random() * 30 + 70));
            document.getElementById('concentration').textContent = concentration + '%';
            
            // 1ì´ˆë§ˆë‹¤ ë‹¤ì‹œ í™•ì¸
            setTimeout(detectPresence, 1000);
        }

        // ì´ í•™ìŠµ ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateTotalTime() {
            const hours = Math.floor(totalStudyTime / 3600000);
            const minutes = Math.floor((totalStudyTime % 3600000) / 60000);
            document.getElementById('totalTime').textContent = `${hours}ì‹œê°„ ${minutes}ë¶„`;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            // ì°¨íŠ¸ ê·¸ë¦¬ê¸° (ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜)
            const canvas = document.getElementById('weeklyChart');
            if (canvas && canvas.getContext) {
                const ctx = canvas.getContext('2d');
                
                // ê°„ë‹¨í•œ ë§‰ëŒ€ ê·¸ë˜í”„
                const data = [6, 7, 8, 6, 9, 8, 7]; // ì¼ë³„ í•™ìŠµ ì‹œê°„
                const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
                
                const barWidth = 40;
                const barGap = 20;
                const startX = 50;
                const startY = 150;
                const maxHeight = 100;
                
                ctx.fillStyle = '#4c51bf';
                data.forEach((value, index) => {
                    const height = (value / 10) * maxHeight;
                    ctx.fillRect(
                        startX + index * (barWidth + barGap),
                        startY - height,
                        barWidth,
                        height
                    );
                    
                    ctx.fillStyle = '#333';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(
                        days[index],
                        startX + index * (barWidth + barGap) + barWidth / 2,
                        startY + 20
                    );
                    ctx.fillText(
                        value + 'h',
                        startX + index * (barWidth + barGap) + barWidth / 2,
                        startY - height - 10
                    );
                    
                    ctx.fillStyle = '#4c51bf';
                });
            }
        };
    </script>
</body>
</html>
